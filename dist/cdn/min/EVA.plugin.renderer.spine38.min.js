var t,e;t=this,e=function(t,e,r,n){"use strict";function a(t,e,r,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function i(t,e,r,n){return new(r||(r=Promise))((function(a,i){function o(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,s)}l((n=n.apply(t,e||[])).next())}))}class o extends e.Component{constructor(){super(...arguments),this.resource="",this.animationName="",this.autoPlay=!0}init(t){t&&(Object.assign(this,t),this.autoPlay&&this.play(this.animationName))}onDestroy(){this.destroied=!0}play(t,e,r){try{t&&(this.animationName=t),this.armature&&(void 0===r&&(r=0),this.armature.state.setAnimation(r,this.animationName,e))}catch(t){console.log(t)}}stop(t){this.armature&&(void 0===t&&(t=0),this.armature.state.setEmptyAnimation(t,0))}addAnimation(t,e,r,n){try{this.armature&&(void 0===n&&(n=0),this.armature.state.addAnimation(n,t,r,e))}catch(t){console.log(t)}}setMix(t,e,r){this.armature&&this.armature.stateData.setMix(t,e,r)}getAnim(t=0){try{if(this.armature)return this.armature.state.tracks[t].animation.name}catch(t){console.log(t)}}setDefaultMix(t){this.armature&&(this.armature.stateData.defaultMix=t)}setAttachment(t,e){this.armature&&this.armature.skeleton.setAttachment(t,e)}getBone(t){if(this.armature)return this.armature.skeleton.findBone(t)}}o.componentName="Spine",a([e.decorators.IDEProp],o.prototype,"resource",void 0),a([e.decorators.IDEProp],o.prototype,"animationName",void 0),a([e.decorators.IDEProp],o.prototype,"autoPlay",void 0);const s=n.loaders.shared,l={Texture:n.Texture,Rectangle:n.Rectangle,Sprite:n.Sprite,Graphics:n.Graphics,mesh:n.mesh,Matrix:n.Matrix,Container:n.Container,VERSION:"4.8.9",loaders:n.loaders,loader:s,SCALE_MODES:n.SCALE_MODES,utils:n.utils,TransformBase:n.TransformBase,TransformStatic:n.TransformStatic,DisplayObject:n.DisplayObject,Polygon:n.Polygon,BaseTexture:n.BaseTexture};var h,c,u,d=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});!function(t){!function(t){var e,r,n,a=function(){function t(t,e,r){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var n=0;n<e.length;n++)this.timelineIds[e[n].getPropertyId()]=!0;this.duration=r}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,r,n,a,i,o,s){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(r%=this.duration,e>0&&(e%=this.duration));for(var l=this.timelines,h=0,c=l.length;h<c;h++)l[h].apply(t,e,r,a,i,o,s)},t.binarySearch=function(t,e,r){void 0===r&&(r=1);var n=0,a=t.length/r-2;if(0==a)return r;for(var i=a>>>1;;){if(t[(i+1)*r]<=e?n=i+1:a=i,n==a)return(n+1)*r;i=n+a>>>1}},t.linearSearch=function(t,e,r){for(var n=0,a=t.length-r;n<=a;n+=r)if(t[n]>e)return n;return-1},t}();t.Animation=a,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(e=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(r=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(n=t.TimelineType||(t.TimelineType={}));var i=function(){function e(r){if(r<=0)throw new Error("frameCount must be > 0: "+r);this.curves=t.Utils.newFloatArray((r-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var r=t*e.BEZIER_SIZE;if(r==this.curves.length)return e.LINEAR;var n=this.curves[r];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,r,n,a,i){var o=.03*(2*-r+a),s=.03*(2*-n+i),l=.006*(3*(r-a)+1),h=.006*(3*(n-i)+1),c=2*o+l,u=2*s+h,d=.3*r+o+.16666667*l,f=.3*n+s+.16666667*h,p=t*e.BEZIER_SIZE,m=this.curves;m[p++]=e.BEZIER;for(var g=d,v=f,y=p+e.BEZIER_SIZE-1;p<y;p+=2)m[p]=g,m[p+1]=v,d+=c,f+=u,c+=l,u+=h,g+=d,v+=f},e.prototype.getCurvePercent=function(r,n){n=t.MathUtils.clamp(n,0,1);var a=this.curves,i=r*e.BEZIER_SIZE,o=a[i];if(o==e.LINEAR)return n;if(o==e.STEPPED)return 0;for(var s=0,l=++i,h=i+e.BEZIER_SIZE-1;i<h;i+=2)if((s=a[i])>=n){var c=void 0,u=void 0;return i==l?(c=0,u=0):(c=a[i-2],u=a[i-1]),u+(a[i+1]-u)*(n-c)/(s-c)}var d=a[i-1];return d+(1-d)*(n-s)/(1-s)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=i;var o=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e<<1),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.rotate<<24)+this.boneIndex},i.prototype.setFrame=function(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+i.ROTATION]=r},i.prototype.apply=function(t,r,n,o,s,l,h){var c=this.frames,u=t.bones[this.boneIndex];if(u.active)if(n<c[0])switch(l){case e.setup:return void(u.rotation=u.data.rotation);case e.first:var d=u.data.rotation-u.rotation;u.rotation+=(d-360*(16384-(16384.499999999996-d/360|0)))*s}else if(n>=c[c.length-i.ENTRIES]){var f=c[c.length+i.PREV_ROTATION];switch(l){case e.setup:u.rotation=u.data.rotation+f*s;break;case e.first:case e.replace:f+=u.data.rotation-u.rotation,f-=360*(16384-(16384.499999999996-f/360|0));case e.add:u.rotation+=f*s}}else{var p=a.binarySearch(c,n,i.ENTRIES),m=c[p+i.PREV_ROTATION],g=c[p],v=this.getCurvePercent((p>>1)-1,1-(n-g)/(c[p+i.PREV_TIME]-g)),y=c[p+i.ROTATION]-m;switch(y=m+(y-360*(16384-(16384.499999999996-y/360|0)))*v,l){case e.setup:u.rotation=u.data.rotation+(y-360*(16384-(16384.499999999996-y/360|0)))*s;break;case e.first:case e.replace:y+=u.data.rotation-u.rotation;case e.add:u.rotation+=(y-360*(16384-(16384.499999999996-y/360|0)))*s}}},i.ENTRIES=2,i.PREV_TIME=-2,i.PREV_ROTATION=-1,i.ROTATION=1,i}(i);t.RotateTimeline=o;var s=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*i.ENTRIES),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.translate<<24)+this.boneIndex},i.prototype.setFrame=function(t,e,r,n){t*=i.ENTRIES,this.frames[t]=e,this.frames[t+i.X]=r,this.frames[t+i.Y]=n},i.prototype.apply=function(t,r,n,o,s,l,h){var c=this.frames,u=t.bones[this.boneIndex];if(u.active)if(n<c[0])switch(l){case e.setup:return u.x=u.data.x,void(u.y=u.data.y);case e.first:u.x+=(u.data.x-u.x)*s,u.y+=(u.data.y-u.y)*s}else{var d=0,f=0;if(n>=c[c.length-i.ENTRIES])d=c[c.length+i.PREV_X],f=c[c.length+i.PREV_Y];else{var p=a.binarySearch(c,n,i.ENTRIES);d=c[p+i.PREV_X],f=c[p+i.PREV_Y];var m=c[p],g=this.getCurvePercent(p/i.ENTRIES-1,1-(n-m)/(c[p+i.PREV_TIME]-m));d+=(c[p+i.X]-d)*g,f+=(c[p+i.Y]-f)*g}switch(l){case e.setup:u.x=u.data.x+d*s,u.y=u.data.y+f*s;break;case e.first:case e.replace:u.x+=(u.data.x+d-u.x)*s,u.y+=(u.data.y+f-u.y)*s;break;case e.add:u.x+=d*s,u.y+=f*s}}},i.ENTRIES=3,i.PREV_TIME=-3,i.PREV_X=-2,i.PREV_Y=-1,i.X=1,i.Y=2,i}(i);t.TranslateTimeline=s;var l=function(i){function o(t){return i.call(this,t)||this}return d(o,i),o.prototype.getPropertyId=function(){return(n.scale<<24)+this.boneIndex},o.prototype.apply=function(n,i,s,l,h,c,u){var d=this.frames,f=n.bones[this.boneIndex];if(f.active)if(s<d[0])switch(c){case e.setup:return f.scaleX=f.data.scaleX,void(f.scaleY=f.data.scaleY);case e.first:f.scaleX+=(f.data.scaleX-f.scaleX)*h,f.scaleY+=(f.data.scaleY-f.scaleY)*h}else{var p=0,m=0;if(s>=d[d.length-o.ENTRIES])p=d[d.length+o.PREV_X]*f.data.scaleX,m=d[d.length+o.PREV_Y]*f.data.scaleY;else{var g=a.binarySearch(d,s,o.ENTRIES);p=d[g+o.PREV_X],m=d[g+o.PREV_Y];var v=d[g],y=this.getCurvePercent(g/o.ENTRIES-1,1-(s-v)/(d[g+o.PREV_TIME]-v));p=(p+(d[g+o.X]-p)*y)*f.data.scaleX,m=(m+(d[g+o.Y]-m)*y)*f.data.scaleY}if(1==h)c==e.add?(f.scaleX+=p-f.data.scaleX,f.scaleY+=m-f.data.scaleY):(f.scaleX=p,f.scaleY=m);else{var x=0,M=0;if(u==r.mixOut)switch(c){case e.setup:x=f.data.scaleX,M=f.data.scaleY,f.scaleX=x+(Math.abs(p)*t.MathUtils.signum(x)-x)*h,f.scaleY=M+(Math.abs(m)*t.MathUtils.signum(M)-M)*h;break;case e.first:case e.replace:x=f.scaleX,M=f.scaleY,f.scaleX=x+(Math.abs(p)*t.MathUtils.signum(x)-x)*h,f.scaleY=M+(Math.abs(m)*t.MathUtils.signum(M)-M)*h;break;case e.add:x=f.scaleX,M=f.scaleY,f.scaleX=x+(Math.abs(p)*t.MathUtils.signum(x)-f.data.scaleX)*h,f.scaleY=M+(Math.abs(m)*t.MathUtils.signum(M)-f.data.scaleY)*h}else switch(c){case e.setup:x=Math.abs(f.data.scaleX)*t.MathUtils.signum(p),M=Math.abs(f.data.scaleY)*t.MathUtils.signum(m),f.scaleX=x+(p-x)*h,f.scaleY=M+(m-M)*h;break;case e.first:case e.replace:x=Math.abs(f.scaleX)*t.MathUtils.signum(p),M=Math.abs(f.scaleY)*t.MathUtils.signum(m),f.scaleX=x+(p-x)*h,f.scaleY=M+(m-M)*h;break;case e.add:x=t.MathUtils.signum(p),M=t.MathUtils.signum(m),f.scaleX=Math.abs(f.scaleX)*x+(p-Math.abs(f.data.scaleX)*x)*h,f.scaleY=Math.abs(f.scaleY)*M+(m-Math.abs(f.data.scaleY)*M)*h}}}},o}(s);t.ScaleTimeline=l;var h=function(t){function r(e){return t.call(this,e)||this}return d(r,t),r.prototype.getPropertyId=function(){return(n.shear<<24)+this.boneIndex},r.prototype.apply=function(t,n,i,o,s,l,h){var c=this.frames,u=t.bones[this.boneIndex];if(u.active)if(i<c[0])switch(l){case e.setup:return u.shearX=u.data.shearX,void(u.shearY=u.data.shearY);case e.first:u.shearX+=(u.data.shearX-u.shearX)*s,u.shearY+=(u.data.shearY-u.shearY)*s}else{var d=0,f=0;if(i>=c[c.length-r.ENTRIES])d=c[c.length+r.PREV_X],f=c[c.length+r.PREV_Y];else{var p=a.binarySearch(c,i,r.ENTRIES);d=c[p+r.PREV_X],f=c[p+r.PREV_Y];var m=c[p],g=this.getCurvePercent(p/r.ENTRIES-1,1-(i-m)/(c[p+r.PREV_TIME]-m));d+=(c[p+r.X]-d)*g,f+=(c[p+r.Y]-f)*g}switch(l){case e.setup:u.shearX=u.data.shearX+d*s,u.shearY=u.data.shearY+f*s;break;case e.first:case e.replace:u.shearX+=(u.data.shearX+d-u.shearX)*s,u.shearY+=(u.data.shearY+f-u.shearY)*s;break;case e.add:u.shearX+=d*s,u.shearY+=f*s}}},r}(s);t.ShearTimeline=h;var c=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*i.ENTRIES),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.color<<24)+this.slotIndex},i.prototype.setFrame=function(t,e,r,n,a,o){t*=i.ENTRIES,this.frames[t]=e,this.frames[t+i.R]=r,this.frames[t+i.G]=n,this.frames[t+i.B]=a,this.frames[t+i.A]=o},i.prototype.apply=function(t,r,n,o,s,l,h){var c=t.slots[this.slotIndex];if(c.bone.active){var u=this.frames;if(n<u[0])switch(l){case e.setup:return void c.color.setFromColor(c.data.color);case e.first:var d=c.color,f=c.data.color;d.add((f.r-d.r)*s,(f.g-d.g)*s,(f.b-d.b)*s,(f.a-d.a)*s)}else{var p=0,m=0,g=0,v=0;if(n>=u[u.length-i.ENTRIES]){var y=u.length;p=u[y+i.PREV_R],m=u[y+i.PREV_G],g=u[y+i.PREV_B],v=u[y+i.PREV_A]}else{var x=a.binarySearch(u,n,i.ENTRIES);p=u[x+i.PREV_R],m=u[x+i.PREV_G],g=u[x+i.PREV_B],v=u[x+i.PREV_A];var M=u[x],w=this.getCurvePercent(x/i.ENTRIES-1,1-(n-M)/(u[x+i.PREV_TIME]-M));p+=(u[x+i.R]-p)*w,m+=(u[x+i.G]-m)*w,g+=(u[x+i.B]-g)*w,v+=(u[x+i.A]-v)*w}1==s?c.color.set(p,m,g,v):(d=c.color,l==e.setup&&d.setFromColor(c.data.color),d.add((p-d.r)*s,(m-d.g)*s,(g-d.b)*s,(v-d.a)*s))}}},i.ENTRIES=5,i.PREV_TIME=-5,i.PREV_R=-4,i.PREV_G=-3,i.PREV_B=-2,i.PREV_A=-1,i.R=1,i.G=2,i.B=3,i.A=4,i}(i);t.ColorTimeline=c;var u=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*i.ENTRIES),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.twoColor<<24)+this.slotIndex},i.prototype.setFrame=function(t,e,r,n,a,o,s,l,h){t*=i.ENTRIES,this.frames[t]=e,this.frames[t+i.R]=r,this.frames[t+i.G]=n,this.frames[t+i.B]=a,this.frames[t+i.A]=o,this.frames[t+i.R2]=s,this.frames[t+i.G2]=l,this.frames[t+i.B2]=h},i.prototype.apply=function(t,r,n,o,s,l,h){var c=t.slots[this.slotIndex];if(c.bone.active){var u=this.frames;if(n<u[0])switch(l){case e.setup:return c.color.setFromColor(c.data.color),void c.darkColor.setFromColor(c.data.darkColor);case e.first:var d=c.color,f=c.darkColor,p=c.data.color,m=c.data.darkColor;d.add((p.r-d.r)*s,(p.g-d.g)*s,(p.b-d.b)*s,(p.a-d.a)*s),f.add((m.r-f.r)*s,(m.g-f.g)*s,(m.b-f.b)*s,0)}else{var g=0,v=0,y=0,x=0,M=0,w=0,E=0;if(n>=u[u.length-i.ENTRIES]){var T=u.length;g=u[T+i.PREV_R],v=u[T+i.PREV_G],y=u[T+i.PREV_B],x=u[T+i.PREV_A],M=u[T+i.PREV_R2],w=u[T+i.PREV_G2],E=u[T+i.PREV_B2]}else{var b=a.binarySearch(u,n,i.ENTRIES);g=u[b+i.PREV_R],v=u[b+i.PREV_G],y=u[b+i.PREV_B],x=u[b+i.PREV_A],M=u[b+i.PREV_R2],w=u[b+i.PREV_G2],E=u[b+i.PREV_B2];var S=u[b],A=this.getCurvePercent(b/i.ENTRIES-1,1-(n-S)/(u[b+i.PREV_TIME]-S));g+=(u[b+i.R]-g)*A,v+=(u[b+i.G]-v)*A,y+=(u[b+i.B]-y)*A,x+=(u[b+i.A]-x)*A,M+=(u[b+i.R2]-M)*A,w+=(u[b+i.G2]-w)*A,E+=(u[b+i.B2]-E)*A}1==s?(c.color.set(g,v,y,x),c.darkColor.set(M,w,E,1)):(d=c.color,f=c.darkColor,l==e.setup&&(d.setFromColor(c.data.color),f.setFromColor(c.data.darkColor)),d.add((g-d.r)*s,(v-d.g)*s,(y-d.b)*s,(x-d.a)*s),f.add((M-f.r)*s,(w-f.g)*s,(E-f.b)*s,0))}}},i.ENTRIES=8,i.PREV_TIME=-8,i.PREV_R=-7,i.PREV_G=-6,i.PREV_B=-5,i.PREV_A=-4,i.PREV_R2=-3,i.PREV_G2=-2,i.PREV_B2=-1,i.R=1,i.G=2,i.B=3,i.A=4,i.R2=5,i.G2=6,i.B2=7,i}(i);t.TwoColorTimeline=u;var f=function(){function i(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return i.prototype.getPropertyId=function(){return(n.attachment<<24)+this.slotIndex},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},i.prototype.apply=function(t,n,i,o,s,l,h){var c=t.slots[this.slotIndex];if(c.bone.active)if(h!=r.mixOut){var u=this.frames;if(i<u[0])l!=e.setup&&l!=e.first||this.setAttachment(t,c,c.data.attachmentName);else{var d=0;d=i>=u[u.length-1]?u.length-1:a.binarySearch(u,i,1)-1;var f=this.attachmentNames[d];t.slots[this.slotIndex].setAttachment(null==f?null:t.getAttachment(this.slotIndex,f))}}else l==e.setup&&this.setAttachment(t,c,c.data.attachmentName)},i.prototype.setAttachment=function(t,e,r){e.attachment=null==r?null:t.getAttachment(this.slotIndex,r)},i}();t.AttachmentTimeline=f;var p=null,m=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e),n.frameVertices=new Array(e),null==p&&(p=t.Utils.newFloatArray(64)),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.deform<<27)+ +this.attachment.id+this.slotIndex},i.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.frameVertices[t]=r},i.prototype.apply=function(r,n,i,o,s,l,h){var c=r.slots[this.slotIndex];if(c.bone.active){var u=c.getAttachment();if(u instanceof t.VertexAttachment&&u.deformAttachment==this.attachment){var d=c.deform;0==d.length&&(l=e.setup);var f=this.frameVertices,p=f[0].length,m=this.frames;if(i<m[0]){var g=u;switch(l){case e.setup:return void(d.length=0);case e.first:if(1==s){d.length=0;break}var v=t.Utils.setArraySize(d,p);if(null==g.bones)for(var y=g.vertices,x=0;x<p;x++)v[x]+=(y[x]-v[x])*s;else for(s=1-s,x=0;x<p;x++)v[x]*=s}}else{var M=t.Utils.setArraySize(d,p);if(i>=m[m.length-1]){var w=f[m.length-1];if(1==s)if(l==e.add)if(null==(g=u).bones){y=g.vertices;for(var E=0;E<p;E++)M[E]+=w[E]-y[E]}else for(var T=0;T<p;T++)M[T]+=w[T];else t.Utils.arrayCopy(w,0,M,0,p);else switch(l){case e.setup:var b=u;if(null==b.bones){y=b.vertices;for(var S=0;S<p;S++){var A=y[S];M[S]=A+(w[S]-A)*s}}else for(var I=0;I<p;I++)M[I]=w[I]*s;break;case e.first:case e.replace:for(var R=0;R<p;R++)M[R]+=(w[R]-M[R])*s;break;case e.add:if(null==(g=u).bones){y=g.vertices;for(var C=0;C<p;C++)M[C]+=(w[C]-y[C])*s}else for(var P=0;P<p;P++)M[P]+=w[P]*s}}else{var k=a.binarySearch(m,i),V=f[k-1],N=f[k],F=m[k],O=this.getCurvePercent(k-1,1-(i-F)/(m[k-1]-F));if(1==s)if(l==e.add)if(null==(g=u).bones){y=g.vertices;for(var D=0;D<p;D++){var _=V[D];M[D]+=_+(N[D]-_)*O-y[D]}}else for(var U=0;U<p;U++)_=V[U],M[U]+=_+(N[U]-_)*O;else for(var B=0;B<p;B++)_=V[B],M[B]=_+(N[B]-_)*O;else switch(l){case e.setup:var Y=u;if(null==Y.bones){y=Y.vertices;for(var L=0;L<p;L++)_=V[L],A=y[L],M[L]=A+(_+(N[L]-_)*O-A)*s}else for(var X=0;X<p;X++)_=V[X],M[X]=(_+(N[X]-_)*O)*s;break;case e.first:case e.replace:for(var W=0;W<p;W++)_=V[W],M[W]+=(_+(N[W]-_)*O-M[W])*s;break;case e.add:if(null==(g=u).bones){y=g.vertices;for(var q=0;q<p;q++)_=V[q],M[q]+=(_+(N[q]-_)*O-y[q])*s}else for(var j=0;j<p;j++)_=V[j],M[j]+=(_+(N[j]-_)*O)*s}}}}}},i}(i);t.DeformTimeline=m;var g=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return n.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,r,n,i,o,s){if(null!=n){var l=this.frames,h=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,i,o,s),e=-1;else if(e>=l[h-1])return;if(!(r<l[0])){var c=0;if(e<l[0])c=0;else for(var u=l[c=a.binarySearch(l,e)];c>0&&l[c-1]==u;)c--;for(;c<h&&r>=l[c];c++)n.push(this.events[c])}}},e}();t.EventTimeline=g;var v=function(){function i(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return i.prototype.getPropertyId=function(){return n.drawOrder<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},i.prototype.apply=function(n,i,o,s,l,h,c){var u=n.drawOrder,d=n.slots;if(c!=r.mixOut||h!=e.setup){var f=this.frames;if(o<f[0])h!=e.setup&&h!=e.first||t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);else{var p=0;p=o>=f[f.length-1]?f.length-1:a.binarySearch(f,o)-1;var m=this.drawOrders[p];if(null==m)t.Utils.arrayCopy(d,0,u,0,d.length);else for(var g=0,v=m.length;g<v;g++)u[g]=d[m[g]]}}else t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length)},i}();t.DrawOrderTimeline=v;var y=function(i){function o(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*o.ENTRIES),r}return d(o,i),o.prototype.getPropertyId=function(){return(n.ikConstraint<<24)+this.ikConstraintIndex},o.prototype.setFrame=function(t,e,r,n,a,i,s){t*=o.ENTRIES,this.frames[t]=e,this.frames[t+o.MIX]=r,this.frames[t+o.SOFTNESS]=n,this.frames[t+o.BEND_DIRECTION]=a,this.frames[t+o.COMPRESS]=i?1:0,this.frames[t+o.STRETCH]=s?1:0},o.prototype.apply=function(t,n,i,s,l,h,c){var u=this.frames,d=t.ikConstraints[this.ikConstraintIndex];if(d.active)if(i<u[0])switch(h){case e.setup:return d.mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,void(d.stretch=d.data.stretch);case e.first:d.mix+=(d.data.mix-d.mix)*l,d.softness+=(d.data.softness-d.softness)*l,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch}else if(i>=u[u.length-o.ENTRIES])h==e.setup?(d.mix=d.data.mix+(u[u.length+o.PREV_MIX]-d.data.mix)*l,d.softness=d.data.softness+(u[u.length+o.PREV_SOFTNESS]-d.data.softness)*l,c==r.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=u[u.length+o.PREV_BEND_DIRECTION],d.compress=0!=u[u.length+o.PREV_COMPRESS],d.stretch=0!=u[u.length+o.PREV_STRETCH])):(d.mix+=(u[u.length+o.PREV_MIX]-d.mix)*l,d.softness+=(u[u.length+o.PREV_SOFTNESS]-d.softness)*l,c==r.mixIn&&(d.bendDirection=u[u.length+o.PREV_BEND_DIRECTION],d.compress=0!=u[u.length+o.PREV_COMPRESS],d.stretch=0!=u[u.length+o.PREV_STRETCH]));else{var f=a.binarySearch(u,i,o.ENTRIES),p=u[f+o.PREV_MIX],m=u[f+o.PREV_SOFTNESS],g=u[f],v=this.getCurvePercent(f/o.ENTRIES-1,1-(i-g)/(u[f+o.PREV_TIME]-g));h==e.setup?(d.mix=d.data.mix+(p+(u[f+o.MIX]-p)*v-d.data.mix)*l,d.softness=d.data.softness+(m+(u[f+o.SOFTNESS]-m)*v-d.data.softness)*l,c==r.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=u[f+o.PREV_BEND_DIRECTION],d.compress=0!=u[f+o.PREV_COMPRESS],d.stretch=0!=u[f+o.PREV_STRETCH])):(d.mix+=(p+(u[f+o.MIX]-p)*v-d.mix)*l,d.softness+=(m+(u[f+o.SOFTNESS]-m)*v-d.softness)*l,c==r.mixIn&&(d.bendDirection=u[f+o.PREV_BEND_DIRECTION],d.compress=0!=u[f+o.PREV_COMPRESS],d.stretch=0!=u[f+o.PREV_STRETCH]))}},o.ENTRIES=6,o.PREV_TIME=-6,o.PREV_MIX=-5,o.PREV_SOFTNESS=-4,o.PREV_BEND_DIRECTION=-3,o.PREV_COMPRESS=-2,o.PREV_STRETCH=-1,o.MIX=1,o.SOFTNESS=2,o.BEND_DIRECTION=3,o.COMPRESS=4,o.STRETCH=5,o}(i);t.IkConstraintTimeline=y;var x=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*i.ENTRIES),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.transformConstraint<<24)+this.transformConstraintIndex},i.prototype.setFrame=function(t,e,r,n,a,o){t*=i.ENTRIES,this.frames[t]=e,this.frames[t+i.ROTATE]=r,this.frames[t+i.TRANSLATE]=n,this.frames[t+i.SCALE]=a,this.frames[t+i.SHEAR]=o},i.prototype.apply=function(t,r,n,o,s,l,h){var c=this.frames,u=t.transformConstraints[this.transformConstraintIndex];if(u.active)if(n<c[0]){var d=u.data;switch(l){case e.setup:return u.rotateMix=d.rotateMix,u.translateMix=d.translateMix,u.scaleMix=d.scaleMix,void(u.shearMix=d.shearMix);case e.first:u.rotateMix+=(d.rotateMix-u.rotateMix)*s,u.translateMix+=(d.translateMix-u.translateMix)*s,u.scaleMix+=(d.scaleMix-u.scaleMix)*s,u.shearMix+=(d.shearMix-u.shearMix)*s}}else{var f=0,p=0,m=0,g=0;if(n>=c[c.length-i.ENTRIES]){var v=c.length;f=c[v+i.PREV_ROTATE],p=c[v+i.PREV_TRANSLATE],m=c[v+i.PREV_SCALE],g=c[v+i.PREV_SHEAR]}else{var y=a.binarySearch(c,n,i.ENTRIES);f=c[y+i.PREV_ROTATE],p=c[y+i.PREV_TRANSLATE],m=c[y+i.PREV_SCALE],g=c[y+i.PREV_SHEAR];var x=c[y],M=this.getCurvePercent(y/i.ENTRIES-1,1-(n-x)/(c[y+i.PREV_TIME]-x));f+=(c[y+i.ROTATE]-f)*M,p+=(c[y+i.TRANSLATE]-p)*M,m+=(c[y+i.SCALE]-m)*M,g+=(c[y+i.SHEAR]-g)*M}l==e.setup?(d=u.data,u.rotateMix=d.rotateMix+(f-d.rotateMix)*s,u.translateMix=d.translateMix+(p-d.translateMix)*s,u.scaleMix=d.scaleMix+(m-d.scaleMix)*s,u.shearMix=d.shearMix+(g-d.shearMix)*s):(u.rotateMix+=(f-u.rotateMix)*s,u.translateMix+=(p-u.translateMix)*s,u.scaleMix+=(m-u.scaleMix)*s,u.shearMix+=(g-u.shearMix)*s)}},i.ENTRIES=5,i.PREV_TIME=-5,i.PREV_ROTATE=-4,i.PREV_TRANSLATE=-3,i.PREV_SCALE=-2,i.PREV_SHEAR=-1,i.ROTATE=1,i.TRANSLATE=2,i.SCALE=3,i.SHEAR=4,i}(i);t.TransformConstraintTimeline=x;var M=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*i.ENTRIES),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.pathConstraintPosition<<24)+this.pathConstraintIndex},i.prototype.setFrame=function(t,e,r){t*=i.ENTRIES,this.frames[t]=e,this.frames[t+i.VALUE]=r},i.prototype.apply=function(t,r,n,o,s,l,h){var c=this.frames,u=t.pathConstraints[this.pathConstraintIndex];if(u.active)if(n<c[0])switch(l){case e.setup:return void(u.position=u.data.position);case e.first:u.position+=(u.data.position-u.position)*s}else{var d=0;if(n>=c[c.length-i.ENTRIES])d=c[c.length+i.PREV_VALUE];else{var f=a.binarySearch(c,n,i.ENTRIES);d=c[f+i.PREV_VALUE];var p=c[f],m=this.getCurvePercent(f/i.ENTRIES-1,1-(n-p)/(c[f+i.PREV_TIME]-p));d+=(c[f+i.VALUE]-d)*m}l==e.setup?u.position=u.data.position+(d-u.data.position)*s:u.position+=(d-u.position)*s}},i.ENTRIES=2,i.PREV_TIME=-2,i.PREV_VALUE=-1,i.VALUE=1,i}(i);t.PathConstraintPositionTimeline=M;var w=function(t){function r(e){return t.call(this,e)||this}return d(r,t),r.prototype.getPropertyId=function(){return(n.pathConstraintSpacing<<24)+this.pathConstraintIndex},r.prototype.apply=function(t,n,i,o,s,l,h){var c=this.frames,u=t.pathConstraints[this.pathConstraintIndex];if(u.active)if(i<c[0])switch(l){case e.setup:return void(u.spacing=u.data.spacing);case e.first:u.spacing+=(u.data.spacing-u.spacing)*s}else{var d=0;if(i>=c[c.length-r.ENTRIES])d=c[c.length+r.PREV_VALUE];else{var f=a.binarySearch(c,i,r.ENTRIES);d=c[f+r.PREV_VALUE];var p=c[f],m=this.getCurvePercent(f/r.ENTRIES-1,1-(i-p)/(c[f+r.PREV_TIME]-p));d+=(c[f+r.VALUE]-d)*m}l==e.setup?u.spacing=u.data.spacing+(d-u.data.spacing)*s:u.spacing+=(d-u.spacing)*s}},r}(M);t.PathConstraintSpacingTimeline=w;var E=function(r){function i(e){var n=r.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*i.ENTRIES),n}return d(i,r),i.prototype.getPropertyId=function(){return(n.pathConstraintMix<<24)+this.pathConstraintIndex},i.prototype.setFrame=function(t,e,r,n){t*=i.ENTRIES,this.frames[t]=e,this.frames[t+i.ROTATE]=r,this.frames[t+i.TRANSLATE]=n},i.prototype.apply=function(t,r,n,o,s,l,h){var c=this.frames,u=t.pathConstraints[this.pathConstraintIndex];if(u.active)if(n<c[0])switch(l){case e.setup:return u.rotateMix=u.data.rotateMix,void(u.translateMix=u.data.translateMix);case e.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*s,u.translateMix+=(u.data.translateMix-u.translateMix)*s}else{var d=0,f=0;if(n>=c[c.length-i.ENTRIES])d=c[c.length+i.PREV_ROTATE],f=c[c.length+i.PREV_TRANSLATE];else{var p=a.binarySearch(c,n,i.ENTRIES);d=c[p+i.PREV_ROTATE],f=c[p+i.PREV_TRANSLATE];var m=c[p],g=this.getCurvePercent(p/i.ENTRIES-1,1-(n-m)/(c[p+i.PREV_TIME]-m));d+=(c[p+i.ROTATE]-d)*g,f+=(c[p+i.TRANSLATE]-f)*g}l==e.setup?(u.rotateMix=u.data.rotateMix+(d-u.data.rotateMix)*s,u.translateMix=u.data.translateMix+(f-u.data.translateMix)*s):(u.rotateMix+=(d-u.rotateMix)*s,u.translateMix+=(f-u.translateMix)*s)}},i.ENTRIES=3,i.PREV_TIME=-3,i.PREV_ROTATE=-2,i.PREV_TRANSLATE=-1,i.ROTATE=1,i.TRANSLATE=2,i}(i);t.PathConstraintMixTimeline=E}(t.core||(t.core={}))}(u||(u={})),function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new a(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new r})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,n=e.length;r<n;r++){var a=e[r];if(null!=a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var i=t*a.timeScale;if(a.delay>0){if(a.delay-=i,a.delay>0)continue;i=-a.delay,a.delay=0}var o=a.next;if(null!=o){var s=a.trackLast-o.delay;if(s>=0){for(o.delay=0,o.trackTime+=0==a.timeScale?0:(s/a.timeScale+t)*o.timeScale,a.trackTime+=i,this.setCurrent(r,o,!0);null!=o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&null==a.mixingFrom){e[r]=null,this.queue.end(a),this.disposeNext(a);continue}if(null!=a.mixingFrom&&this.updateMixingFrom(a,t)){var l=a.mixingFrom;for(a.mixingFrom=null,null!=l&&(l.mixingTo=null);null!=l;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=i}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(null==r)return!0;var n=this.updateMixingFrom(r,e);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=r.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=r.mixingFrom,null!=r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),n):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(r){if(null==r)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,a=this.tracks,i=!1,o=0,s=a.length;o<s;o++){var l=a[o];if(!(null==l||l.delay>0)){i=!0;var h=0==o?t.MixBlend.first:l.mixBlend,c=l.alpha;null!=l.mixingFrom?c*=this.applyMixingFrom(l,r,h):l.trackTime>=l.trackEnd&&null==l.next&&(c=0);var u=l.animationLast,d=l.getAnimationTime(),f=l.animation.timelines.length,p=l.animation.timelines;if(0==o&&1==c||h==t.MixBlend.add)for(var m=0;m<f;m++){t.Utils.webkit602BugfixHelper(c,h);var g=p[m];g instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(g,r,d,h,!0):g.apply(r,u,d,n,c,h,t.MixDirection.mixIn)}else{var v=l.timelineMode,y=0==l.timelinesRotation.length;y&&t.Utils.setArraySize(l.timelinesRotation,f<<1,null);var x=l.timelinesRotation;for(m=0;m<f;m++){var M=p[m],w=v[m]==e.SUBSEQUENT?h:t.MixBlend.setup;M instanceof t.RotateTimeline?this.applyRotateTimeline(M,r,d,c,w,x,m<<1,y):M instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(M,r,d,h,!0):(t.Utils.webkit602BugfixHelper(c,h),M.apply(r,u,d,n,c,w,t.MixDirection.mixIn))}}this.queueEvents(l,d),n.length=0,l.nextAnimationLast=d,l.nextTrackLast=l.trackTime}}for(var E=this.unkeyedState+e.SETUP,T=r.slots,b=0,S=r.slots.length;b<S;b++){var A=T[b];if(A.attachmentState==E){var I=A.data.attachmentName;A.attachment=null==I?null:r.getAttachment(A.data.index,I)}}return this.unkeyedState+=2,this.queue.drain(),i},e.prototype.applyMixingFrom=function(r,n,a){var i=r.mixingFrom;null!=i.mixingFrom&&this.applyMixingFrom(i,n,a);var o=0;0==r.mixDuration?(o=1,a==t.MixBlend.first&&(a=t.MixBlend.setup)):((o=r.mixTime/r.mixDuration)>1&&(o=1),a!=t.MixBlend.first&&(a=i.mixBlend));var s=o<i.eventThreshold?this.events:null,l=o<i.attachmentThreshold,h=o<i.drawOrderThreshold,c=i.animationLast,u=i.getAnimationTime(),d=i.animation.timelines.length,f=i.animation.timelines,p=i.alpha*r.interruptAlpha,m=p*(1-o);if(a==t.MixBlend.add)for(var g=0;g<d;g++)f[g].apply(n,c,u,s,m,a,t.MixDirection.mixOut);else{var v=i.timelineMode,y=i.timelineHoldMix,x=0==i.timelinesRotation.length;x&&t.Utils.setArraySize(i.timelinesRotation,d<<1,null);var M=i.timelinesRotation;for(i.totalAlpha=0,g=0;g<d;g++){var w=f[g],E=t.MixDirection.mixOut,T=void 0,b=0;switch(v[g]){case e.SUBSEQUENT:if(!h&&w instanceof t.DrawOrderTimeline)continue;T=a,b=m;break;case e.FIRST:T=t.MixBlend.setup,b=m;break;case e.HOLD_SUBSEQUENT:T=a,b=p;break;case e.HOLD_FIRST:T=t.MixBlend.setup,b=p;break;default:T=t.MixBlend.setup;var S=y[g];b=p*Math.max(0,1-S.mixTime/S.mixDuration)}i.totalAlpha+=b,w instanceof t.RotateTimeline?this.applyRotateTimeline(w,n,u,b,T,M,g<<1,x):w instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(w,n,u,T,l):(t.Utils.webkit602BugfixHelper(b,a),h&&w instanceof t.DrawOrderTimeline&&T==t.MixBlend.setup&&(E=t.MixDirection.mixIn),w.apply(n,c,u,s,b,T,E))}}return r.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,o},e.prototype.applyAttachmentTimeline=function(r,n,a,i,o){var s=n.slots[r.slotIndex];if(s.bone.active){var l,h=r.frames;a<h[0]?i!=t.MixBlend.setup&&i!=t.MixBlend.first||this.setAttachment(n,s,s.data.attachmentName,o):(l=a>=h[h.length-1]?h.length-1:t.Animation.binarySearch(h,a)-1,this.setAttachment(n,s,r.attachmentNames[l],o)),s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+e.SETUP)}},e.prototype.setAttachment=function(t,r,n,a){r.attachment=null==n?null:t.getAttachment(r.data.index,n),a&&(r.attachmentState=this.unkeyedState+e.CURRENT)},e.prototype.applyRotateTimeline=function(e,r,n,a,i,o,s,l){if(l&&(o[s]=0),1!=a){var h=e,c=h.frames,u=r.bones[h.boneIndex];if(u.active){var d=0,f=0;if(n<c[0])switch(i){case t.MixBlend.setup:u.rotation=u.data.rotation;default:return;case t.MixBlend.first:d=u.rotation,f=u.data.rotation}else if(d=i==t.MixBlend.setup?u.data.rotation:u.rotation,n>=c[c.length-t.RotateTimeline.ENTRIES])f=u.data.rotation+c[c.length+t.RotateTimeline.PREV_ROTATION];else{var p=t.Animation.binarySearch(c,n,t.RotateTimeline.ENTRIES),m=c[p+t.RotateTimeline.PREV_ROTATION],g=c[p],v=h.getCurvePercent((p>>1)-1,1-(n-g)/(c[p+t.RotateTimeline.PREV_TIME]-g));f=c[p+t.RotateTimeline.ROTATION]-m,f=m+(f-=360*(16384-(16384.499999999996-f/360|0)))*v+u.data.rotation,f-=360*(16384-(16384.499999999996-f/360|0))}var y=0,x=f-d;if(0==(x-=360*(16384-(16384.499999999996-x/360|0))))y=o[s];else{var M=0,w=0;l?(M=0,w=x):(M=o[s],w=o[s+1]);var E=x>0,T=M>=0;t.MathUtils.signum(w)!=t.MathUtils.signum(x)&&Math.abs(w)<=90&&(Math.abs(M)>180&&(M+=360*t.MathUtils.signum(M)),T=E),y=x+M-M%360,T!=E&&(y+=360*t.MathUtils.signum(M)),o[s]=y}o[s+1]=x,d+=y*a,u.rotation=d-360*(16384-(16384.499999999996-d/360|0))}}else e.apply(r,0,n,null,1,i,t.MixDirection.mixIn)},e.prototype.queueEvents=function(t,e){for(var r=t.animationStart,n=t.animationEnd,a=n-r,i=t.trackLast%a,o=this.events,s=0,l=o.length;s<l;s++){var h=o[s];if(h.time<i)break;h.time>n||this.queue.event(t,h)}for((t.loop?0==a||i>t.trackTime%a:e>=n&&t.animationLast<n)&&this.queue.complete(t);s<l;s++)o[s].time<r||this.queue.event(t,o[s])},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var r=e;;){var n=r.mixingFrom;if(null==n)break;this.queue.end(n),r.mixingFrom=null,r.mixingTo=null,r=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,r){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(r&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,r){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,r)},e.prototype.setAnimationWith=function(t,e,r){if(null==e)throw new Error("animation cannot be null.");var n=!0,a=this.expandToIndex(t);null!=a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,n=!1):this.disposeNext(a));var i=this.trackEntry(t,e,r,a);return this.setCurrent(t,i,n),this.queue.drain(),i},e.prototype.addAnimation=function(t,e,r,n){var a=this.data.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,a,r,n)},e.prototype.addAnimationWith=function(t,e,r,n){if(null==e)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(null!=a)for(;null!=a.next;)a=a.next;var i=this.trackEntry(t,e,r,a);if(null==a)this.setCurrent(t,i,!0),this.queue.drain();else if(a.next=i,n<=0){var o=a.animationEnd-a.animationStart;0!=o?(a.loop?n+=o*(1+(a.trackTime/o|0)):n+=Math.max(o,a.trackTime),n-=this.data.getMix(a.animation,e)):n=a.trackTime}return i.delay=n,i},e.prototype.setEmptyAnimation=function(t,r){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=r,n.trackEnd=r,n},e.prototype.addEmptyAnimation=function(t,r,n){n<=0&&(n-=r);var a=this.addAnimationWith(t,e.emptyAnimation,!1,n);return a.mixDuration=r,a.trackEnd=r,a},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++){var a=this.tracks[r];null!=a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(e,r,n,a){var i=this.trackEntryPool.obtain();return i.trackIndex=e,i.animation=r,i.loop=n,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=r.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=null==a?0:this.data.getMix(a.animation,r),i.mixBlend=t.MixBlend.replace,i},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,r=this.tracks.length;e<r;e++){var n=this.tracks[e];if(null!=n){for(;null!=n.mixingFrom;)n=n.mixingFrom;do{null!=n.mixingFrom&&n.mixBlend==t.MixBlend.add||this.computeHold(n),n=n.mixingTo}while(null!=n)}}},e.prototype.computeHold=function(r){var n=r.mixingTo,a=r.animation.timelines,i=r.animation.timelines.length,o=t.Utils.setArraySize(r.timelineMode,i);r.timelineHoldMix.length=0;var s=t.Utils.setArraySize(r.timelineHoldMix,i),l=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var h=0;h<i;h++)o[h]=l.add(a[h].getPropertyId())?e.HOLD_FIRST:e.HOLD_SUBSEQUENT;else t:for(h=0;h<i;h++){var c=a[h],u=c.getPropertyId();if(l.add(u))if(null==n||c instanceof t.AttachmentTimeline||c instanceof t.DrawOrderTimeline||c instanceof t.EventTimeline||!n.animation.hasTimeline(u))o[h]=e.FIRST;else{for(var d=n.mixingTo;null!=d;d=d.mixingTo)if(!d.animation.hasTimeline(u)){if(r.mixDuration>0){o[h]=e.HOLD_MIX,s[h]=d;continue t}break}o[h]=e.HOLD_FIRST}else o[h]=e.SUBSEQUENT}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,r,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,r,n)},e.prototype.addAnimationByName=function(t,r,n,a){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,r,n,a)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD_SUBSEQUENT=2,e.HOLD_FIRST=3,e.HOLD_MIX=4,e.SETUP=1,e.CURRENT=2,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var r=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}();t.TrackEntry=r;var n,a=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(n.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(n.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(n.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(n.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(n.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(n.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,a=0;a<e.length;a+=2){var i=e[a],o=e[a+1];switch(i){case n.start:null!=o.listener&&o.listener.start&&o.listener.start(o);for(var s=0;s<r.length;s++)r[s].start&&r[s].start(o);o.onStart&&this.deprecateStuff()&&o.onStart(o.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(o.trackIndex);break;case n.interrupt:for(null!=o.listener&&o.listener.interrupt&&o.listener.interrupt(o),s=0;s<r.length;s++)r[s].interrupt&&r[s].interrupt(o);break;case n.end:for(null!=o.listener&&o.listener.end&&o.listener.end(o),s=0;s<r.length;s++)r[s].end&&r[s].end(o);o.onEnd&&this.deprecateStuff()&&o.onEnd(o.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(o.trackIndex);case n.dispose:for(null!=o.listener&&o.listener.dispose&&o.listener.dispose(o),s=0;s<r.length;s++)r[s].dispose&&r[s].dispose(o);this.animState.trackEntryPool.free(o);break;case n.complete:for(null!=o.listener&&o.listener.complete&&o.listener.complete(o),s=0;s<r.length;s++)r[s].complete&&r[s].complete(o);var l=t.MathUtils.toInt(o.loopsCount());o.onComplete&&this.deprecateStuff()&&o.onComplete(o.trackIndex,l),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(o.trackIndex,l);break;case n.event:var h=e[2+a++];for(null!=o.listener&&o.listener.event&&o.listener.event(o,h),s=0;s<r.length;s++)r[s].event&&r[s].event(o,h);o.onEvent&&this.deprecateStuff()&&o.onEvent(o.trackIndex,h),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(o.trackIndex,h)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=a,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(n=t.EventType||(t.EventType={}));var i=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter=i}(t.core||(t.core={}))}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,r){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);this.setMixWith(n,a,r)},t.prototype.setMixByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,r,n)},t.prototype.setMixWith=function(t,e,r){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var n=t.name+"."+e.name;this.animationToMixTime[n]=r},t.prototype.getMix=function(t,e){var r=t.name+"."+e.name,n=this.animationToMixTime[r];return void 0===n?this.defaultMix:n},t.deprecatedWarning1=!1,t}(),e.AnimationStateData=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,r,n){var a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");var i=new e.RegionAttachment(r);return i.region=a,i},t.prototype.newMeshAttachment=function(t,r,n){var a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");var i=new e.MeshAttachment(r);return i.region=a,i},t.prototype.newBoundingBoxAttachment=function(t,r){return new e.BoundingBoxAttachment(r)},t.prototype.newPathAttachment=function(t,r){return new e.PathAttachment(r)},t.prototype.newPointAttachment=function(t,r){return new e.PointAttachment(r)},t.prototype.newClippingAttachment=function(t,r){return new e.ClippingAttachment(r)},t}(),e.AtlasAttachmentLoader=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),(r=e.BlendMode||(e.BlendMode={}))[r.Normal=0]="Normal",r[r.Additive=1]="Additive",r[r.Multiply=2]="Multiply",r[r.Screen=3]="Screen"}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t,e,r){if(this.matrix=new l.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(r,n,a,i,o,s,l){this.ax=r,this.ay=n,this.arotation=a,this.ascaleX=i,this.ascaleY=o,this.ashearX=s,this.ashearY=l,this.appliedValid=!0;var h=this.parent,c=this.matrix,u=this.skeleton.scaleX,d=t.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==h){var f=this.skeleton,p=a+90+l;return c.a=e.MathUtils.cosDeg(a+s)*i*u,c.c=e.MathUtils.cosDeg(p)*o*u,c.b=e.MathUtils.sinDeg(a+s)*i*d,c.d=e.MathUtils.sinDeg(p)*o*d,c.tx=r*u+f.x,void(c.ty=n*d+f.y)}var m=h.matrix.a,g=h.matrix.c,v=h.matrix.b,y=h.matrix.d;switch(c.tx=m*r+g*n+h.matrix.tx,c.ty=v*r+y*n+h.matrix.ty,this.data.transformMode){case e.TransformMode.Normal:p=a+90+l;var x=e.MathUtils.cosDeg(a+s)*i,M=e.MathUtils.cosDeg(p)*o,w=e.MathUtils.sinDeg(a+s)*i,E=e.MathUtils.sinDeg(p)*o;return c.a=m*x+g*w,c.c=m*M+g*E,c.b=v*x+y*w,void(c.d=v*M+y*E);case e.TransformMode.OnlyTranslation:p=a+90+l,c.a=e.MathUtils.cosDeg(a+s)*i,c.c=e.MathUtils.cosDeg(p)*o,c.b=e.MathUtils.sinDeg(a+s)*i,c.d=e.MathUtils.sinDeg(p)*o;break;case e.TransformMode.NoRotationOrReflection:var T=0;(A=m*m+v*v)>1e-4?(A=Math.abs(m*y-g*v)/A,m/=this.skeleton.scaleX,g=(v/=this.skeleton.scaleY)*A,y=m*A,T=Math.atan2(v,m)*e.MathUtils.radDeg):(m=0,v=0,T=90-Math.atan2(y,g)*e.MathUtils.radDeg);var b=a+s-T,S=a+l-T+90;x=e.MathUtils.cosDeg(b)*i,M=e.MathUtils.cosDeg(S)*o,w=e.MathUtils.sinDeg(b)*i,E=e.MathUtils.sinDeg(S)*o,c.a=m*x-g*w,c.c=m*M-g*E,c.b=v*x+y*w,c.d=v*M+y*E;break;case e.TransformMode.NoScale:case e.TransformMode.NoScaleOrReflection:var A,I=e.MathUtils.cosDeg(a),R=e.MathUtils.sinDeg(a),C=(m*I+g*R)/u,P=(v*I+y*R)/d;(A=Math.sqrt(C*C+P*P))>1e-5&&(A=1/A),C*=A,P*=A,A=Math.sqrt(C*C+P*P),this.data.transformMode==e.TransformMode.NoScale&&m*y-g*v<0!=(t.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(A=-A);var k=Math.PI/2+Math.atan2(P,C),V=Math.cos(k)*A,N=Math.sin(k)*A;x=e.MathUtils.cosDeg(s)*i,M=e.MathUtils.cosDeg(90+l)*o,w=e.MathUtils.sinDeg(s)*i,E=e.MathUtils.sinDeg(90+l)*o,c.a=C*x+V*w,c.c=C*M+V*E,c.b=P*x+N*w,c.d=P*M+N*E}c.a*=u,c.c*=u,c.b*=d,c.d*=d},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*e.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*e.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,r=this.matrix;if(null==t)return this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*e.MathUtils.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,void(this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*e.MathUtils.radDeg);var n=t.matrix,a=1/(n.a*n.d-n.b*n.c),i=r.tx-n.tx,o=r.ty-n.ty;this.ax=i*n.d*a-o*n.c*a,this.ay=o*n.a*a-i*n.b*a;var s=a*n.d,l=a*n.a,h=a*n.c,c=a*n.b,u=s*r.a-h*r.b,d=s*r.c-h*r.d,f=l*r.b-c*r.a,p=l*r.d-c*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+f*f),this.ascaleX>1e-4){var m=u*p-d*f;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(u*d+f*p,m)*e.MathUtils.radDeg,this.arotation=Math.atan2(f,u)*e.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,d)*e.MathUtils.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,r=e.a,n=e.c,a=e.b,i=e.d,o=1/(r*i-n*a),s=t.x-e.tx,l=t.y-e.ty;return t.x=s*i*o-l*n*o,t.y=l*r*o-s*a*o,t},t.prototype.localToWorld=function(t){var e=this.matrix,r=t.x,n=t.y;return t.x=r*e.a+n*e.c+e.tx,t.y=r*e.b+n*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var r=e.MathUtils.sinDeg(t),n=e.MathUtils.cosDeg(t),a=this.matrix;return Math.atan2(a.a*r-a.b*n,a.d*n-a.c*r)*e.MathUtils.radDeg},t.prototype.localToWorldRotation=function(t){var r=e.MathUtils.sinDeg(t),n=e.MathUtils.cosDeg(t),a=this.matrix;return Math.atan2(n*a.b+r*a.d,n*a.a+r*a.c)*e.MathUtils.radDeg},t.prototype.rotateWorld=function(t){var r=this.matrix,n=r.a,a=r.c,i=r.b,o=r.d,s=e.MathUtils.cosDeg(t),l=e.MathUtils.sinDeg(t);r.a=s*n-l*i,r.c=s*a-l*o,r.b=l*n+s*i,r.d=l*a+s*o,this.appliedValid=!1},t.yDown=!1,t}(),e.Bone=r}(u||(u={})),function(t){var e,r,n;e=t.core||(t.core={}),n=function(t,n,a){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=r.Normal,this.skinRequired=!1,this.color=new e.Color,t<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");this.index=t,this.name=n,this.parent=a},e.BoneData=n,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(r=e.TransformMode||(e.TransformMode={}))}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t,e,r){this.name=t,this.order=e,this.skinRequired=r},e.ConstraintData=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},e.Event=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){this.name=t},e.EventData=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},t.prototype.apply1=function(t,r,n,a,i,o,s){t.appliedValid||t.updateAppliedTransform();var l=t.parent.matrix,h=l.a,c=l.c,u=l.b,d=l.d,f=-t.ashearX-t.arotation,p=0,m=0;switch(t.data.transformMode){case e.TransformMode.OnlyTranslation:p=r-t.worldX,m=n-t.worldY;break;case e.TransformMode.NoRotationOrReflection:var g=Math.abs(h*d-c*u)/(h*h+u*u),v=h/t.skeleton.scaleX,y=u/t.skeleton.scaleY;c=-y*g*t.skeleton.scaleX,d=v*g*t.skeleton.scaleY,f+=Math.atan2(y,v)*e.MathUtils.radDeg;default:var x=r-l.tx,M=n-l.ty,w=h*d-c*u;p=(x*d-M*c)/w-t.ax,m=(M*h-x*u)/w-t.ay}f+=Math.atan2(m,p)*e.MathUtils.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var E=t.ascaleX,T=t.ascaleY;if(a||i){switch(t.data.transformMode){case e.TransformMode.NoScale:case e.TransformMode.NoScaleOrReflection:p=r-t.worldX,m=n-t.worldY}var b=t.data.length*E,S=Math.sqrt(p*p+m*m);(a&&S<b||i&&S>b&&b>1e-4)&&(E*=g=(S/b-1)*s+1,o&&(T*=g))}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*s,E,T,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,r,n,a,i,o,s,l){if(0!=l){t.appliedValid||t.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var h=t.ax,c=t.ay,u=t.ascaleX,d=u,f=t.ascaleY,p=r.ascaleX,m=t.matrix,g=0,v=0,y=0;u<0?(u=-u,g=180,y=-1):(g=0,y=1),f<0&&(f=-f,y=-y),p<0?(p=-p,v=180):v=0;var x=r.ax,M=0,w=0,E=0,T=m.a,b=m.c,S=m.b,A=m.d,I=Math.abs(u-f)<=1e-4;I?(w=T*x+b*(M=r.ay)+m.tx,E=S*x+A*M+m.ty):(M=0,w=T*x+m.tx,E=S*x+m.ty);var R=t.parent.matrix;T=R.a,b=R.c,S=R.b;var C,P,k=1/(T*(A=R.d)-b*S),V=w-R.tx,N=E-R.ty,F=(V*A-N*b)*k-h,O=(N*T-V*S)*k-c,D=Math.sqrt(F*F+O*O),_=r.data.length*p;if(D<1e-4)return this.apply1(t,n,a,!1,o,!1,l),void r.updateWorldTransformWith(x,M,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);var U=((V=n-R.tx)*A-(N=a-R.ty)*b)*k-h,B=(N*T-V*S)*k-c,Y=U*U+B*B;if(0!=s){s*=u*(p+1)/2;var L=Math.sqrt(Y),X=L-D-_*u+s;if(X>0){var W=Math.min(1,X/(2*s))-1;Y=(U-=(W=(X-s*(1-W*W))/L)*U)*U+(B-=W*B)*B}}t:if(I){var q=(Y-D*D-(_*=u)*_)/(2*D*_);q<-1?q=-1:q>1&&(q=1,o&&(d*=(Math.sqrt(Y)/(D+_)-1)*l+1)),P=Math.acos(q)*i,T=D+_*q,b=_*Math.sin(P),C=Math.atan2(B*T-U*b,U*T+B*b)}else{var j=(T=u*_)*T,H=(b=f*_)*b,G=Math.atan2(B,U),z=-2*H*D,Z=H-j;if((A=z*z-4*Z*(S=H*D*D+j*Y-j*H))>=0){var Q=Math.sqrt(A);z<0&&(Q=-Q);var J=(Q=-(z+Q)/2)/Z,K=S/Q,$=Math.abs(J)<Math.abs(K)?J:K;if($*$<=Y){N=Math.sqrt(Y-$*$)*i,C=G-Math.atan2(N,$),P=Math.atan2(N/f,($-D)/u);break t}}var tt=e.MathUtils.PI,et=D-T,rt=et*et,nt=0,at=0,it=D+T,ot=it*it,st=0;(S=-T*D/(j-H))>=-1&&S<=1&&(S=Math.acos(S),(A=(V=T*Math.cos(S)+D)*V+(N=b*Math.sin(S))*N)<rt&&(tt=S,rt=A,et=V,nt=N),A>ot&&(at=S,ot=A,it=V,st=N)),Y<=(rt+ot)/2?(C=G-Math.atan2(nt*i,et),P=tt*i):(C=G-Math.atan2(st*i,it),P=at*i)}var lt=Math.atan2(M,x)*y,ht=t.arotation;(C=(C-lt)*e.MathUtils.radDeg+g-ht)>180?C-=360:C<-180&&(C+=360),t.updateWorldTransformWith(h,c,ht+C*l,d,t.ascaleY,0,0),ht=r.arotation,(P=((P+lt)*e.MathUtils.radDeg-r.ashearX)*y+v-ht)>180?P-=360:P<-180&&(P+=360),r.updateWorldTransformWith(x,M,ht+P*l,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)}else r.updateWorldTransform()},t}(),e.IkConstraint=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return d(e,t),e}(e.ConstraintData),e.IkConstraintData=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,n=t.bones.length;r<n;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var r=this.target.getAttachment();if(r instanceof e.PathAttachment){var n=this.rotateMix,a=this.translateMix,i=n>0;if(a>0||i){var o=this.data,s=o.spacingMode,l=s==e.SpacingMode.Length,h=o.rotateMode,c=h==e.RotateMode.Tangent,u=h==e.RotateMode.ChainScale,d=this.bones.length,f=c?d:d+1,p=this.bones,m=e.Utils.setArraySize(this.spaces,f),g=null,v=this.spacing;if(u||l){u&&(g=e.Utils.setArraySize(this.lengths,d));for(var y=0,x=f-1;y<x;){var M=(P=p[y]).data.length;if(M<t.epsilon)u&&(g[y]=0),m[++y]=0;else{var w=M*P.matrix.a,E=M*P.matrix.b,T=Math.sqrt(w*w+E*E);u&&(g[y]=T),m[++y]=(l?M+v:v)*T/M}}}else for(y=1;y<f;y++)m[y]=v;var b=this.computeWorldPositions(r,f,c,o.positionMode==e.PositionMode.Percent,s==e.SpacingMode.Percent),S=b[0],A=b[1],I=o.offsetRotation,R=!1;0==I?R=h==e.RotateMode.Chain:(R=!1,I*=(C=this.target.bone.matrix).a*C.d-C.b*C.c>0?e.MathUtils.degRad:-e.MathUtils.degRad),y=0;for(var C=3;y<d;y++,C+=3){var P,k=(P=p[y]).matrix;k.tx+=(S-k.tx)*a,k.ty+=(A-k.ty)*a;var V=(w=b[C])-S,N=(E=b[C+1])-A;if(u){var F=g[y];if(0!=F){var O=(Math.sqrt(V*V+N*N)/F-1)*n+1;k.a*=O,k.b*=O}}if(S=w,A=E,i){var D=k.a,_=k.c,U=k.b,B=k.d,Y=0,L=0,X=0;if(Y=c?b[C-1]:0==m[y+1]?b[C+2]:Math.atan2(N,V),Y-=Math.atan2(U,D),R){L=Math.cos(Y),X=Math.sin(Y);var W=P.data.length;S+=(W*(L*D-X*U)-V)*n,A+=(W*(X*D+L*U)-N)*n}else Y+=I;Y>e.MathUtils.PI?Y-=e.MathUtils.PI2:Y<-e.MathUtils.PI&&(Y+=e.MathUtils.PI2),Y*=n,L=Math.cos(Y),X=Math.sin(Y),k.a=L*D-X*U,k.c=L*_-X*B,k.b=X*D+L*U,k.d=X*_+L*B}P.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(r,n,a,i,o){var s=this.target,l=this.position,h=this.spaces,c=e.Utils.setArraySize(this.positions,3*n+2),u=null,d=r.closed,f=r.worldVerticesLength,p=f/6,m=t.NONE;if(!r.constantSpeed){var g=r.lengths,v=g[p-=d?1:2];if(i&&(l*=v),o)for(var y=0;y<n;y++)h[y]*=v;u=e.Utils.setArraySize(this.world,8),y=0;for(var x=0,M=0;y<n;y++,x+=3){var w=l+=j=h[y];if(d)(w%=v)<0&&(w+=v),M=0;else{if(w<0){m!=t.BEFORE&&(m=t.BEFORE,r.computeWorldVertices(s,2,4,u,0,2)),this.addBeforePosition(w,u,0,c,x);continue}if(w>v){m!=t.AFTER&&(m=t.AFTER,r.computeWorldVertices(s,f-6,4,u,0,2)),this.addAfterPosition(w-v,u,0,c,x);continue}}for(;;M++){var E=g[M];if(!(w>E)){0==M?w/=E:w=(w-(Z=g[M-1]))/(E-Z);break}}M!=m&&(m=M,d&&M==p?(r.computeWorldVertices(s,f-4,4,u,0,2),r.computeWorldVertices(s,0,4,u,4,2)):r.computeWorldVertices(s,6*M+2,8,u,0,2)),this.addCurvePosition(w,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],c,x,a||y>0&&0==j)}return c}d?(f+=2,u=e.Utils.setArraySize(this.world,f),r.computeWorldVertices(s,2,f-4,u,0,2),r.computeWorldVertices(s,0,2,u,f-4,2),u[f-2]=u[0],u[f-1]=u[1]):(p--,f-=4,u=e.Utils.setArraySize(this.world,f),r.computeWorldVertices(s,2,f,u,0,2));for(var T=e.Utils.setArraySize(this.curves,p),b=0,S=u[0],A=u[1],I=0,R=0,C=0,P=0,k=0,V=0,N=0,F=0,O=0,D=0,_=0,U=0,B=0,Y=0,L=(y=0,2);y<p;y++,L+=6)I=u[L],R=u[L+1],C=u[L+2],P=u[L+3],_=2*(N=.1875*(S-2*I+C))+(O=.09375*(3*(I-C)-S+(k=u[L+4]))),U=2*(F=.1875*(A-2*R+P))+(D=.09375*(3*(R-P)-A+(V=u[L+5]))),B=.75*(I-S)+N+.16666667*O,Y=.75*(R-A)+F+.16666667*D,b+=Math.sqrt(B*B+Y*Y),B+=_,Y+=U,_+=O,U+=D,b+=Math.sqrt(B*B+Y*Y),B+=_,Y+=U,b+=Math.sqrt(B*B+Y*Y),B+=_+O,Y+=U+D,b+=Math.sqrt(B*B+Y*Y),T[y]=b,S=k,A=V;if(i&&(l*=b),o)for(y=0;y<n;y++)h[y]*=b;for(var X=this.segments,W=0,q=(y=0,x=0,M=0,0);y<n;y++,x+=3){var j;if(w=l+=j=h[y],d)(w%=b)<0&&(w+=b),M=0;else{if(w<0){this.addBeforePosition(w,u,0,c,x);continue}if(w>b){this.addAfterPosition(w-b,u,f-4,c,x);continue}}for(;;M++){var H=T[M];if(!(w>H)){0==M?w/=H:w=(w-(Z=T[M-1]))/(H-Z);break}}if(M!=m){m=M;var G=6*M;for(S=u[G],A=u[G+1],I=u[G+2],R=u[G+3],C=u[G+4],P=u[G+5],_=2*(N=.03*(S-2*I+C))+(O=.006*(3*(I-C)-S+(k=u[G+6]))),U=2*(F=.03*(A-2*R+P))+(D=.006*(3*(R-P)-A+(V=u[G+7]))),B=.3*(I-S)+N+.16666667*O,Y=.3*(R-A)+F+.16666667*D,W=Math.sqrt(B*B+Y*Y),X[0]=W,G=1;G<8;G++)B+=_,Y+=U,_+=O,U+=D,W+=Math.sqrt(B*B+Y*Y),X[G]=W;B+=_,Y+=U,W+=Math.sqrt(B*B+Y*Y),X[8]=W,B+=_+O,Y+=U+D,W+=Math.sqrt(B*B+Y*Y),X[9]=W,q=0}for(w*=W;;q++){var z=X[q];if(!(w>z)){var Z;0==q?w/=z:w=q+(w-(Z=X[q-1]))/(z-Z);break}}this.addCurvePosition(.1*w,S,A,I,R,C,P,k,V,c,x,a||y>0&&0==j)}return c},t.prototype.addBeforePosition=function(t,e,r,n,a){var i=e[r],o=e[r+1],s=e[r+2]-i,l=e[r+3]-o,h=Math.atan2(l,s);n[a]=i+t*Math.cos(h),n[a+1]=o+t*Math.sin(h),n[a+2]=h},t.prototype.addAfterPosition=function(t,e,r,n,a){var i=e[r+2],o=e[r+3],s=i-e[r],l=o-e[r+1],h=Math.atan2(l,s);n[a]=i+t*Math.cos(h),n[a+1]=o+t*Math.sin(h),n[a+2]=h},t.prototype.addCurvePosition=function(t,e,r,n,a,i,o,s,l,h,c,u){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,v=p*t,y=3*v,x=p*y,M=y*t,w=e*g+n*x+i*M+s*f,E=r*g+a*x+o*M+l*f;h[c]=w,h[c+1]=E,u&&(h[c+2]=Math.atan2(E-(r*m+a*v*2+o*d),w-(e*m+n*v*2+i*d)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),e.PathConstraint=r}(u||(u={})),function(t){var e,r,n,a,i;e=t.core||(t.core={}),i=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r}return d(e,t),e}(e.ConstraintData),e.PathConstraintData=i,(r=e.PositionMode||(e.PositionMode={}))[r.Fixed=0]="Fixed",r[r.Percent=1]="Percent",(n=e.SpacingMode||(e.SpacingMode={}))[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",(a=e.RotateMode||(e.RotateMode={}))[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale"}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var n=t.bones[r],a=void 0;if(null==n.parent)a=new e.Bone(n,this,null);else{var i=this.bones[n.parent.index];a=new e.Bone(n,this,i),i.children.push(a)}this.bones.push(a)}for(this.slots=new Array,this.drawOrder=new Array,r=0;r<t.slots.length;r++){var o=t.slots[r],s=(a=this.bones[o.boneData.index],new e.Slot(o,a));this.slots.push(s),this.drawOrder.push(s)}for(this.ikConstraints=new Array,r=0;r<t.ikConstraints.length;r++){var l=t.ikConstraints[r];this.ikConstraints.push(new e.IkConstraint(l,this))}for(this.transformConstraints=new Array,r=0;r<t.transformConstraints.length;r++){var h=t.transformConstraints[r];this.transformConstraints.push(new e.TransformConstraint(h,this))}for(this.pathConstraints=new Array,r=0;r<t.pathConstraints.length;r++){var c=t.pathConstraints[r];this.pathConstraints.push(new e.PathConstraint(c,this))}this.color=new e.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,r=t.length;e<r;e++)(a=t[e]).sorted=a.data.skinRequired,a.active=!a.sorted;if(null!=this.skin){var n=this.skin.bones;for(e=0,r=this.skin.bones.length;e<r;e++){var a=this.bones[n[e].index];do{a.sorted=!1,a.active=!0,a=a.parent}while(null!=a)}}var i=this.ikConstraints,o=this.transformConstraints,s=this.pathConstraints,l=i.length,h=o.length,c=s.length,u=l+h+c;t:for(e=0;e<u;e++){for(var d=0;d<l;d++)if((f=i[d]).data.order==e){this.sortIkConstraint(f);continue t}for(d=0;d<h;d++)if((f=o[d]).data.order==e){this.sortTransformConstraint(f);continue t}for(d=0;d<c;d++){var f;if((f=s[d]).data.order==e){this.sortPathConstraint(f);continue t}}}for(e=0,r=t.length;e<r;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&e.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var r=t.target;this.sortBone(r);var n=t.bones,a=n[0];if(this.sortBone(a),n.length>1){var i=n[n.length-1];this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(a.children),n[n.length-1].sorted=!0}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&e.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var r=t.target,n=r.data.index,a=r.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,a),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,a);for(var i=0,o=this.data.skins.length;i<o;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,a);var s=r.getAttachment();s instanceof e.PathAttachment&&this.sortPathConstraintAttachmentWith(s,a);var l=t.bones,h=l.length;for(i=0;i<h;i++)this.sortBone(l[i]);for(this._updateCache.push(t),i=0;i<h;i++)this.sortReset(l[i].children);for(i=0;i<h;i++)l[i].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&e.Utils.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var r=t.bones,n=r.length;if(t.data.local)for(var a=0;a<n;a++){var i=r[a];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(a=0;a<n;a++)this.sortBone(r[a]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(r[o].children);for(o=0;o<n;o++)r[o].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(t,e,r){var n=t.attachments[e];if(n)for(var a in n)this.sortPathConstraintAttachmentWith(n[a],r)},t.prototype.sortPathConstraintAttachmentWith=function(t,r){if(t instanceof e.PathAttachment){var n=t.bones;if(null==n)this.sortBone(r);else for(var a=this.bones,i=0;i<n.length;)for(var o=n[i++],s=i+o;i<s;i++){var l=n[i];this.sortBone(a[l])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,r=t.length;e<r;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}var a=this._updateCache;for(e=0,r=a.length;e<r;e++)a[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();var n=this.ikConstraints;for(e=0,r=n.length;e<r;e++)(s=n[e]).mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch;var a=this.transformConstraints;for(e=0,r=a.length;e<r;e++){var i=(s=a[e]).data;s.rotateMix=i.rotateMix,s.translateMix=i.translateMix,s.scaleMix=i.scaleMix,s.shearMix=i.shearMix}var o=this.pathConstraints;for(e=0,r=o.length;e<r;e++){var s;i=(s=o[e]).data,s.position=i.position,s.spacing=i.spacing,s.rotateMix=i.rotateMix,s.translateMix=i.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;e.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var r=0,n=t.length;r<n;r++)t[r].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,n=e.length;r<n;r++){var a=e[r],i=a.data.attachmentName;if(null!=i){var o=t.getAttachment(r,i);null!=o&&a.setAttachment(o)}}this.skin=t,this.updateCache()}},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var r=this.skin.getAttachment(t,e);if(null!=r)return r}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,a=r.length;n<a;n++){var i=r[n];if(i.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void i.setAttachment(o)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.getBounds=function(t,r,n){if(void 0===n&&(n=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==r)throw new Error("size cannot be null.");for(var a=this.drawOrder,i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=0,c=a.length;h<c;h++){var u=a[h];if(u.bone.active){var d=0,f=null,p=u.getAttachment();if(p instanceof e.RegionAttachment)d=8,f=e.Utils.setArraySize(n,d,0),p.computeWorldVertices(u.bone,f,0,2);else if(p instanceof e.MeshAttachment){var m=p;d=m.worldVerticesLength,f=e.Utils.setArraySize(n,d,0),m.computeWorldVertices(u,0,d,f,0,2)}if(null!=f)for(var g=0,v=f.length;g<v;g+=2){var y=f[g],x=f[g+1];i=Math.min(i,y),o=Math.min(o,x),s=Math.max(s,y),l=Math.max(l,x)}}}t.set(i,o),r.set(s-i,l-o)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),e.Skeleton=r}(u||(u={})),function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(n){var a=this.scale,i=new t.SkeletonData;i.name="";var o=new r(n);i.hash=o.readString(),i.version=o.readString(),"3.8.75"===i.version&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),i.x=o.readFloat(),i.y=o.readFloat(),i.width=o.readFloat(),i.height=o.readFloat();var s=o.readBoolean();s&&(i.fps=o.readFloat(),i.imagesPath=o.readString(),i.audioPath=o.readString());var l=0;l=o.readInt(!0);for(var h=0;h<l;h++)o.strings.push(o.readString());for(l=o.readInt(!0),h=0;h<l;h++){var c=o.readString(),u=0==h?null:i.bones[o.readInt(!0)];(p=new t.BoneData(h,c,u)).rotation=o.readFloat(),p.x=o.readFloat()*a,p.y=o.readFloat()*a,p.scaleX=o.readFloat(),p.scaleY=o.readFloat(),p.shearX=o.readFloat(),p.shearY=o.readFloat(),p.length=o.readFloat()*a,p.transformMode=e.TransformModeValues[o.readInt(!0)],p.skinRequired=o.readBoolean(),s&&t.Color.rgba8888ToColor(p.color,o.readInt32()),i.bones.push(p)}for(l=o.readInt(!0),h=0;h<l;h++){var d=o.readString(),f=i.bones[o.readInt(!0)],p=new t.SlotData(h,d,f);t.Color.rgba8888ToColor(p.color,o.readInt32());var m=o.readInt32();-1!=m&&t.Color.rgb888ToColor(p.darkColor=new t.Color,m),p.attachmentName=o.readStringRef(),p.blendMode=e.BlendModeValues[o.readInt(!0)],i.slots.push(p)}l=o.readInt(!0),h=0;for(var g=void 0;h<l;h++){(p=new t.IkConstraintData(o.readString())).order=o.readInt(!0),p.skinRequired=o.readBoolean(),g=o.readInt(!0);for(var v=0;v<g;v++)p.bones.push(i.bones[o.readInt(!0)]);p.target=i.bones[o.readInt(!0)],p.mix=o.readFloat(),p.softness=o.readFloat()*a,p.bendDirection=o.readByte(),p.compress=o.readBoolean(),p.stretch=o.readBoolean(),p.uniform=o.readBoolean(),i.ikConstraints.push(p)}for(l=o.readInt(!0),h=0,g=void 0;h<l;h++){for((p=new t.TransformConstraintData(o.readString())).order=o.readInt(!0),p.skinRequired=o.readBoolean(),g=o.readInt(!0),v=0;v<g;v++)p.bones.push(i.bones[o.readInt(!0)]);p.target=i.bones[o.readInt(!0)],p.local=o.readBoolean(),p.relative=o.readBoolean(),p.offsetRotation=o.readFloat(),p.offsetX=o.readFloat()*a,p.offsetY=o.readFloat()*a,p.offsetScaleX=o.readFloat(),p.offsetScaleY=o.readFloat(),p.offsetShearY=o.readFloat(),p.rotateMix=o.readFloat(),p.translateMix=o.readFloat(),p.scaleMix=o.readFloat(),p.shearMix=o.readFloat(),i.transformConstraints.push(p)}for(l=o.readInt(!0),h=0,g=void 0;h<l;h++){for((p=new t.PathConstraintData(o.readString())).order=o.readInt(!0),p.skinRequired=o.readBoolean(),g=o.readInt(!0),v=0;v<g;v++)p.bones.push(i.bones[o.readInt(!0)]);p.target=i.slots[o.readInt(!0)],p.positionMode=e.PositionModeValues[o.readInt(!0)],p.spacingMode=e.SpacingModeValues[o.readInt(!0)],p.rotateMode=e.RotateModeValues[o.readInt(!0)],p.offsetRotation=o.readFloat(),p.position=o.readFloat(),p.positionMode==t.PositionMode.Fixed&&(p.position*=a),p.spacing=o.readFloat(),p.spacingMode!=t.SpacingMode.Length&&p.spacingMode!=t.SpacingMode.Fixed||(p.spacing*=a),p.rotateMix=o.readFloat(),p.translateMix=o.readFloat(),i.pathConstraints.push(p)}var y=this.readSkin(o,i,!0,s);for(null!=y&&(i.defaultSkin=y,i.skins.push(y)),h=i.skins.length,t.Utils.setArraySize(i.skins,l=h+o.readInt(!0));h<l;h++)i.skins[h]=this.readSkin(o,i,!1,s);for(l=this.linkedMeshes.length,h=0;h<l;h++){var x=this.linkedMeshes[h],M=null==x.skin?i.defaultSkin:i.findSkin(x.skin);if(null==M)throw new Error("Skin not found: "+x.skin);var w=M.getAttachment(x.slotIndex,x.parent);if(null==w)throw new Error("Parent mesh not found: "+x.parent);x.mesh.deformAttachment=x.inheritDeform?w:x.mesh,x.mesh.setParentMesh(w)}for(this.linkedMeshes.length=0,l=o.readInt(!0),h=0;h<l;h++)(p=new t.EventData(o.readStringRef())).intValue=o.readInt(!1),p.floatValue=o.readFloat(),p.stringValue=o.readString(),p.audioPath=o.readString(),null!=p.audioPath&&(p.volume=o.readFloat(),p.balance=o.readFloat()),i.events.push(p);for(l=o.readInt(!0),h=0;h<l;h++)i.animations.push(this.readAnimation(o,o.readString(),i));return i},e.prototype.readSkin=function(e,r,n,a){var i=null,o=0;if(n){if(0==(o=e.readInt(!0)))return null;i=new t.Skin("default")}else{(i=new t.Skin(e.readStringRef())).bones.length=e.readInt(!0);for(var s=0,l=i.bones.length;s<l;s++)i.bones[s]=r.bones[e.readInt(!0)];for(s=0,l=e.readInt(!0);s<l;s++)i.constraints.push(r.ikConstraints[e.readInt(!0)]);for(s=0,l=e.readInt(!0);s<l;s++)i.constraints.push(r.transformConstraints[e.readInt(!0)]);for(s=0,l=e.readInt(!0);s<l;s++)i.constraints.push(r.pathConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(s=0;s<o;s++)for(var h=e.readInt(!0),c=0,u=e.readInt(!0);c<u;c++){var d=e.readStringRef(),f=this.readAttachment(e,r,i,h,d,a);null!=f&&i.setAttachment(h,d,f)}return i},e.prototype.readAttachment=function(r,a,i,o,s,l){var h=this.scale,c=r.readStringRef();null==c&&(c=s);var u=r.readByte();switch(e.AttachmentTypeValues[u]){case t.AttachmentType.Region:var d=r.readStringRef(),f=r.readFloat(),p=r.readFloat(),m=r.readFloat(),g=r.readFloat(),v=r.readFloat(),y=r.readFloat(),x=r.readFloat(),M=r.readInt32();null==d&&(d=c);var w=this.attachmentLoader.newRegionAttachment(i,c,d);return null==w?null:(w.path=d,w.x=p*h,w.y=m*h,w.scaleX=g,w.scaleY=v,w.rotation=f,w.width=y*h,w.height=x*h,t.Color.rgba8888ToColor(w.color,M),w);case t.AttachmentType.BoundingBox:var E=r.readInt(!0),T=this.readVertices(r,E),b=(M=l?r.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(i,c));return null==b?null:(b.worldVerticesLength=E<<1,b.vertices=T.vertices,b.bones=T.bones,l&&t.Color.rgba8888ToColor(b.color,M),b);case t.AttachmentType.Mesh:d=r.readStringRef(),M=r.readInt32(),E=r.readInt(!0);var S=this.readFloatArray(r,E<<1,1),A=this.readShortArray(r),I=(T=this.readVertices(r,E),r.readInt(!0)),R=null;return y=0,x=0,l&&(R=this.readShortArray(r),y=r.readFloat(),x=r.readFloat()),null==d&&(d=c),null==(C=this.attachmentLoader.newMeshAttachment(i,c,d))?null:(C.path=d,t.Color.rgba8888ToColor(C.color,M),C.bones=T.bones,C.vertices=T.vertices,C.worldVerticesLength=E<<1,C.triangles=A,C.regionUVs=new Float32Array(S),C.hullLength=I<<1,l&&(C.edges=R,C.width=y*h,C.height=x*h),C);case t.AttachmentType.LinkedMesh:d=r.readStringRef(),M=r.readInt32();var C,P=r.readStringRef(),k=r.readStringRef(),V=r.readBoolean();return y=0,x=0,l&&(y=r.readFloat(),x=r.readFloat()),null==d&&(d=c),null==(C=this.attachmentLoader.newMeshAttachment(i,c,d))?null:(C.path=d,t.Color.rgba8888ToColor(C.color,M),l&&(C.width=y*h,C.height=x*h),this.linkedMeshes.push(new n(C,P,o,k,V)),C);case t.AttachmentType.Path:for(var N=r.readBoolean(),F=r.readBoolean(),O=(E=r.readInt(!0),T=this.readVertices(r,E),t.Utils.newArray(E/3,0)),D=0,_=O.length;D<_;D++)O[D]=r.readFloat()*h;return M=l?r.readInt32():0,null==(d=this.attachmentLoader.newPathAttachment(i,c))?null:(d.closed=N,d.constantSpeed=F,d.worldVerticesLength=E<<1,d.vertices=T.vertices,d.bones=T.bones,d.lengths=O,l&&t.Color.rgba8888ToColor(d.color,M),d);case t.AttachmentType.Point:f=r.readFloat(),p=r.readFloat(),m=r.readFloat(),M=l?r.readInt32():0;var U=this.attachmentLoader.newPointAttachment(i,c);return null==U?null:(U.x=p*h,U.y=m*h,U.rotation=f,l&&t.Color.rgba8888ToColor(U.color,M),U);case t.AttachmentType.Clipping:var B=r.readInt(!0),Y=(E=r.readInt(!0),T=this.readVertices(r,E),M=l?r.readInt32():0,this.attachmentLoader.newClippingAttachment(i,c));return null==Y?null:(Y.endSlot=a.slots[B],Y.worldVerticesLength=E<<1,Y.vertices=T.vertices,Y.bones=T.bones,l&&t.Color.rgba8888ToColor(Y.color,M),Y)}return null},e.prototype.readVertices=function(e,r){var n=r<<1,i=new a,o=this.scale;if(!e.readBoolean())return i.vertices=this.readFloatArray(e,n,o),i;for(var s=new Array,l=new Array,h=0;h<r;h++){var c=e.readInt(!0);l.push(c);for(var u=0;u<c;u++)l.push(e.readInt(!0)),s.push(e.readFloat()*o),s.push(e.readFloat()*o),s.push(e.readFloat())}return i.vertices=t.Utils.toFloatArray(s),i.bones=l,i},e.prototype.readFloatArray=function(t,e,r){var n=new Array(e);if(1==r)for(var a=0;a<e;a++)n[a]=t.readFloat();else for(a=0;a<e;a++)n[a]=t.readFloat()*r;return n},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),r=new Array(e),n=0;n<e;n++)r[n]=t.readShort();return r},e.prototype.readAnimation=function(r,n,a){for(var i=new Array,o=this.scale,s=0,l=new t.Color,h=new t.Color,c=0,u=r.readInt(!0);c<u;c++)for(var d=r.readInt(!0),f=0,p=r.readInt(!0);f<p;f++){var m=r.readByte(),g=r.readInt(!0);switch(m){case e.SLOT_ATTACHMENT:(M=new t.AttachmentTimeline(g)).slotIndex=d;for(var v=0;v<g;v++)M.setFrame(v,r.readFloat(),r.readStringRef());i.push(M),s=Math.max(s,M.frames[g-1]);break;case e.SLOT_COLOR:for((M=new t.ColorTimeline(g)).slotIndex=d,v=0;v<g;v++){var y=r.readFloat();t.Color.rgba8888ToColor(l,r.readInt32()),M.setFrame(v,y,l.r,l.g,l.b,l.a),v<g-1&&this.readCurve(r,v,M)}i.push(M),s=Math.max(s,M.frames[(g-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:for((M=new t.TwoColorTimeline(g)).slotIndex=d,v=0;v<g;v++)y=r.readFloat(),t.Color.rgba8888ToColor(l,r.readInt32()),t.Color.rgb888ToColor(h,r.readInt32()),M.setFrame(v,y,l.r,l.g,l.b,l.a,h.r,h.g,h.b),v<g-1&&this.readCurve(r,v,M);i.push(M),s=Math.max(s,M.frames[(g-1)*t.TwoColorTimeline.ENTRIES])}}for(c=0,u=r.readInt(!0);c<u;c++){var x=r.readInt(!0);for(f=0,p=r.readInt(!0);f<p;f++)switch(m=r.readByte(),g=r.readInt(!0),m){case e.BONE_ROTATE:for((M=new t.RotateTimeline(g)).boneIndex=x,v=0;v<g;v++)M.setFrame(v,r.readFloat(),r.readFloat()),v<g-1&&this.readCurve(r,v,M);i.push(M),s=Math.max(s,M.frames[(g-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:var M=void 0,w=1;for(m==e.BONE_SCALE?M=new t.ScaleTimeline(g):m==e.BONE_SHEAR?M=new t.ShearTimeline(g):(M=new t.TranslateTimeline(g),w=o),M.boneIndex=x,v=0;v<g;v++)M.setFrame(v,r.readFloat(),r.readFloat()*w,r.readFloat()*w),v<g-1&&this.readCurve(r,v,M);i.push(M),s=Math.max(s,M.frames[(g-1)*t.TranslateTimeline.ENTRIES])}}for(c=0,u=r.readInt(!0);c<u;c++){var E=r.readInt(!0);for(g=r.readInt(!0),(M=new t.IkConstraintTimeline(g)).ikConstraintIndex=E,v=0;v<g;v++)M.setFrame(v,r.readFloat(),r.readFloat(),r.readFloat()*o,r.readByte(),r.readBoolean(),r.readBoolean()),v<g-1&&this.readCurve(r,v,M);i.push(M),s=Math.max(s,M.frames[(g-1)*t.IkConstraintTimeline.ENTRIES])}for(c=0,u=r.readInt(!0);c<u;c++){for(E=r.readInt(!0),g=r.readInt(!0),(M=new t.TransformConstraintTimeline(g)).transformConstraintIndex=E,v=0;v<g;v++)M.setFrame(v,r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat()),v<g-1&&this.readCurve(r,v,M);i.push(M),s=Math.max(s,M.frames[(g-1)*t.TransformConstraintTimeline.ENTRIES])}for(c=0,u=r.readInt(!0);c<u;c++){E=r.readInt(!0);var T=a.pathConstraints[E];for(f=0,p=r.readInt(!0);f<p;f++)switch(m=r.readByte(),g=r.readInt(!0),m){case e.PATH_POSITION:case e.PATH_SPACING:for(M=void 0,w=1,m==e.PATH_SPACING?(M=new t.PathConstraintSpacingTimeline(g),T.spacingMode!=t.SpacingMode.Length&&T.spacingMode!=t.SpacingMode.Fixed||(w=o)):(M=new t.PathConstraintPositionTimeline(g),T.positionMode==t.PositionMode.Fixed&&(w=o)),M.pathConstraintIndex=E,v=0;v<g;v++)M.setFrame(v,r.readFloat(),r.readFloat()*w),v<g-1&&this.readCurve(r,v,M);i.push(M),s=Math.max(s,M.frames[(g-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:for((M=new t.PathConstraintMixTimeline(g)).pathConstraintIndex=E,v=0;v<g;v++)M.setFrame(v,r.readFloat(),r.readFloat(),r.readFloat()),v<g-1&&this.readCurve(r,v,M);i.push(M),s=Math.max(s,M.frames[(g-1)*t.PathConstraintMixTimeline.ENTRIES])}}for(c=0,u=r.readInt(!0);c<u;c++){var b=a.skins[r.readInt(!0)];for(f=0,p=r.readInt(!0);f<p;f++){d=r.readInt(!0);for(var S=0,A=r.readInt(!0);S<A;S++){var I=b.getAttachment(d,r.readStringRef()),R=null!=I.bones,C=I.vertices,P=R?C.length/3*2:C.length;for(g=r.readInt(!0),(M=new t.DeformTimeline(g)).slotIndex=d,M.attachment=I,v=0;v<g;v++){y=r.readFloat();var k=void 0,V=r.readInt(!0);if(0==V)k=R?t.Utils.newFloatArray(P):C;else{k=t.Utils.newFloatArray(P);var N=r.readInt(!0);if(V+=N,1==o)for(var F=N;F<V;F++)k[F]=r.readFloat();else for(F=N;F<V;F++)k[F]=r.readFloat()*o;if(!R){F=0;for(var O=k.length;F<O;F++)k[F]+=C[F]}}M.setFrame(v,y,k),v<g-1&&this.readCurve(r,v,M)}i.push(M),s=Math.max(s,M.frames[g-1])}}}var D=r.readInt(!0);if(D>0){M=new t.DrawOrderTimeline(D);var _=a.slots.length;for(c=0;c<D;c++){y=r.readFloat();var U=r.readInt(!0),B=t.Utils.newArray(_,0);for(f=_-1;f>=0;f--)B[f]=-1;var Y=t.Utils.newArray(_-U,0),L=0,X=0;for(f=0;f<U;f++){for(d=r.readInt(!0);L!=d;)Y[X++]=L++;B[L+r.readInt(!0)]=L++}for(;L<_;)Y[X++]=L++;for(f=_-1;f>=0;f--)-1==B[f]&&(B[f]=Y[--X]);M.setFrame(c,y,B)}i.push(M),s=Math.max(s,M.frames[D-1])}var W=r.readInt(!0);if(W>0){for(M=new t.EventTimeline(W),c=0;c<W;c++){y=r.readFloat();var q=a.events[r.readInt(!0)],j=new t.Event(y,q);j.intValue=r.readInt(!1),j.floatValue=r.readFloat(),j.stringValue=r.readBoolean()?r.readString():q.stringValue,null!=j.data.audioPath&&(j.volume=r.readFloat(),j.balance=r.readFloat()),M.setFrame(c,j)}i.push(M),s=Math.max(s,M.frames[W-1])}return new t.Animation(n,i,s)},e.prototype.readCurve=function(t,r,n){switch(t.readByte()){case e.CURVE_STEPPED:n.setStepped(r);break;case e.CURVE_BEZIER:this.setCurve(n,r,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},e.prototype.setCurve=function(t,e,r,n,a,i){t.setCurve(e,r,n,a,i)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var r=function(){function t(t,e,r,n){void 0===e&&(e=new Array),void 0===r&&(r=0),void 0===n&&(n=new DataView(t.buffer)),this.strings=e,this.index=r,this.buffer=n}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),r=127&e;return 0!=(128&e)&&(r|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(r|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(r|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(r|=(127&(e=this.readByte()))<<28)))),t?r:r>>>1^-(1&r)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",r=0;r<t;){var n=this.readByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((31&n)<<6|63&this.readByte()),r+=2;break;case 14:e+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),r+=3;break;default:e+=String.fromCharCode(n),r++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),n=function(t,e,r,n,a){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritDeform=a},a=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}}(t.core||(t.core={}))}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new e.Pool((function(){return e.Utils.newFloatArray(16)}))}return t.prototype.update=function(t,r){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,a=this.polygons,i=this.polygonPool,o=t.slots,s=o.length;n.length=0,i.freeAll(a),a.length=0;for(var l=0;l<s;l++){var h=o[l];if(h.bone.active){var c=h.getAttachment();if(c instanceof e.BoundingBoxAttachment){var u=c;n.push(u);var d=i.obtain();d.length!=u.worldVerticesLength&&(d=e.Utils.newFloatArray(u.worldVerticesLength)),a.push(d),u.computeWorldVertices(h,0,u.worldVerticesLength,d,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=this.polygons,i=0,o=a.length;i<o;i++)for(var s=a[i],l=s,h=0,c=s.length;h<c;h+=2){var u=l[h],d=l[h+1];t=Math.min(t,u),e=Math.min(e,d),r=Math.max(r,u),n=Math.max(n,d)}this.minX=t,this.minY=e,this.maxX=r,this.maxY=n},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,r,n){var a=this.minX,i=this.minY,o=this.maxX,s=this.maxY;if(t<=a&&r<=a||e<=i&&n<=i||t>=o&&r>=o||e>=s&&n>=s)return!1;var l=(n-e)/(r-t),h=l*(a-t)+e;if(h>i&&h<s)return!0;if((h=l*(o-t)+e)>i&&h<s)return!0;var c=(i-e)/l+t;return c>a&&c<o||(c=(s-e)/l+t)>a&&c<o},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var r=this.polygons,n=0,a=r.length;n<a;n++)if(this.containsPointPolygon(r[n],t,e))return this.boundingBoxes[n];return null},t.prototype.containsPointPolygon=function(t,e,r){for(var n=t,a=t.length,i=a-2,o=!1,s=0;s<a;s+=2){var l=n[s+1],h=n[i+1];if(l<r&&h>=r||h<r&&l>=r){var c=n[s];c+(r-l)/(h-l)*(n[i]-c)<e&&(o=!o)}i=s}return o},t.prototype.intersectsSegment=function(t,e,r,n){for(var a=this.polygons,i=0,o=a.length;i<o;i++)if(this.intersectsSegmentPolygon(a[i],t,e,r,n))return this.boundingBoxes[i];return null},t.prototype.intersectsSegmentPolygon=function(t,e,r,n,a){for(var i=t,o=t.length,s=e-n,l=r-a,h=e*a-r*n,c=i[o-2],u=i[o-1],d=0;d<o;d+=2){var f=i[d],p=i[d+1],m=c*p-u*f,g=c-f,v=u-p,y=s*v-l*g,x=(h*g-s*m)/y;if((x>=c&&x<=f||x>=f&&x<=c)&&(x>=e&&x<=n||x>=n&&x<=e)){var M=(h*v-l*m)/y;if((M>=u&&M<=p||M>=p&&M<=u)&&(M>=r&&M<=a||M>=a&&M<=r))return!0}c=f,u=p}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),e.SkeletonBounds=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(){this.triangulator=new e.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return t.prototype.clipStart=function(r,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var a=n.worldVerticesLength,i=e.Utils.setArraySize(this.clippingPolygon,a);n.computeWorldVertices(r,0,a,i,0,2);var o=this.clippingPolygon;t.makeClockwise(o);for(var s=this.clippingPolygons=this.triangulator.decompose(o,this.triangulator.triangulate(o)),l=0,h=s.length;l<h;l++){var c=s[l];t.makeClockwise(c),c.push(c[0]),c.push(c[1])}return s.length},t.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},t.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},t.prototype.isClipping=function(){return null!=this.clipAttachment},t.prototype.clipTriangles=function(t,r,n,a,i,o,s,l){var h=this.clipOutput,c=this.clippedVertices,u=this.clippedTriangles,d=this.clippingPolygons,f=this.clippingPolygons.length,p=l?12:8,m=0;c.length=0,u.length=0;t:for(var g=0;g<a;g+=3)for(var v=n[g]<<1,y=t[v],x=t[v+1],M=i[v],w=i[v+1],E=t[v=n[g+1]<<1],T=t[v+1],b=i[v],S=i[v+1],A=t[v=n[g+2]<<1],I=t[v+1],R=i[v],C=i[v+1],P=0;P<f;P++){var k=c.length;if(!this.clip(y,x,E,T,A,I,d[P],h)){(Y=e.Utils.setArraySize(c,k+3*p))[k]=y,Y[k+1]=x,Y[k+2]=o.r,Y[k+3]=o.g,Y[k+4]=o.b,Y[k+5]=o.a,l?(Y[k+6]=M,Y[k+7]=w,Y[k+8]=s.r,Y[k+9]=s.g,Y[k+10]=s.b,Y[k+11]=s.a,Y[k+12]=E,Y[k+13]=T,Y[k+14]=o.r,Y[k+15]=o.g,Y[k+16]=o.b,Y[k+17]=o.a,Y[k+18]=b,Y[k+19]=S,Y[k+20]=s.r,Y[k+21]=s.g,Y[k+22]=s.b,Y[k+23]=s.a,Y[k+24]=A,Y[k+25]=I,Y[k+26]=o.r,Y[k+27]=o.g,Y[k+28]=o.b,Y[k+29]=o.a,Y[k+30]=R,Y[k+31]=C,Y[k+32]=s.r,Y[k+33]=s.g,Y[k+34]=s.b,Y[k+35]=s.a):(Y[k+6]=M,Y[k+7]=w,Y[k+8]=E,Y[k+9]=T,Y[k+10]=o.r,Y[k+11]=o.g,Y[k+12]=o.b,Y[k+13]=o.a,Y[k+14]=b,Y[k+15]=S,Y[k+16]=A,Y[k+17]=I,Y[k+18]=o.r,Y[k+19]=o.g,Y[k+20]=o.b,Y[k+21]=o.a,Y[k+22]=R,Y[k+23]=C),k=u.length,(Z=e.Utils.setArraySize(u,k+3))[k]=m,Z[k+1]=m+1,Z[k+2]=m+2,m+=3;continue t}var V=h.length;if(0!=V){for(var N=T-I,F=A-E,O=y-A,D=I-x,_=1/(N*O+F*(x-I)),U=V>>1,B=this.clipOutput,Y=e.Utils.setArraySize(c,k+U*p),L=0;L<V;L+=2){var X=B[L],W=B[L+1];Y[k]=X,Y[k+1]=W,Y[k+2]=o.r,Y[k+3]=o.g,Y[k+4]=o.b,Y[k+5]=o.a;var q=X-A,j=W-I,H=(N*q+F*j)*_,G=(D*q+O*j)*_,z=1-H-G;Y[k+6]=M*H+b*G+R*z,Y[k+7]=w*H+S*G+C*z,l&&(Y[k+8]=s.r,Y[k+9]=s.g,Y[k+10]=s.b,Y[k+11]=s.a),k+=p}k=u.length;var Z=e.Utils.setArraySize(u,k+3*(U-2));for(U--,L=1;L<U;L++)Z[k]=m,Z[k+1]=m+L,Z[k+2]=m+L+1,k+=3;m+=U+1}}},t.prototype.clip=function(t,e,r,n,a,i,o,s){var l=s,h=!1,c=null;o.length%4>=2?(c=s,s=this.scratch):c=this.scratch,c.length=0,c.push(t),c.push(e),c.push(r),c.push(n),c.push(a),c.push(i),c.push(t),c.push(e),s.length=0;for(var u=o,d=o.length-4,f=0;;f+=2){for(var p=u[f],m=u[f+1],g=u[f+2],v=u[f+3],y=p-g,x=m-v,M=c,w=c.length-2,E=s.length,T=0;T<w;T+=2){var b=M[T],S=M[T+1],A=M[T+2],I=M[T+3],R=y*(I-v)-x*(A-g)>0;if(y*(S-v)-x*(b-g)>0){if(R){s.push(A),s.push(I);continue}var C=((k=A-b)*(m-S)-(P=I-S)*(p-b))/(P*(g-p)-k*(v-m));s.push(p+(g-p)*C),s.push(m+(v-m)*C)}else if(R){var P,k;C=((k=A-b)*(m-S)-(P=I-S)*(p-b))/(P*(g-p)-k*(v-m)),s.push(p+(g-p)*C),s.push(m+(v-m)*C),s.push(A),s.push(I)}h=!0}if(E==s.length)return l.length=0,!0;if(s.push(s[0]),s.push(s[1]),f==d)break;var V=s;(s=c).length=0,c=V}if(l!=s){l.length=0,f=0;for(var N=s.length-2;f<N;f++)l[f]=s[f]}else l.length=l.length-2;return h},t.makeClockwise=function(t){for(var e=t,r=t.length,n=e[r-2]*e[1]-e[0]*e[r-1],a=0,i=0,o=0,s=0,l=r-3;s<l;s+=2)a=e[s],i=e[s+1],o=e[s+2],n+=a*e[s+3]-o*i;if(!(n<0)){s=0;var h=r-2;for(l=r>>1;s<l;s+=2){var c=e[s],u=e[s+1],d=h-s;e[s]=e[d],e[s+1]=e[d+1],e[d]=c,e[d+1]=u}}},t}(),e.SkeletonClipping=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1},t}(),e.SkeletonData=r}(u||(u={})),function(t){!function(t){t.FAIL_ON_NON_EXISTING_SKIN=!1;var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(r){var n=this.scale,a=new t.SkeletonData,i="string"==typeof r?JSON.parse(r):r,o=i.skeleton;if(null!=o){if(a.hash=o.hash,a.version=o.spine,"3.8"!==a.version.substr(0,3)){var s="PixiJS Spine plugin supports only format for Spine 3.8. Your model has version "+o.spine+". Please look in pixi-spine repository README for another branch.";console.error(s)}"3.8.75"===a.version&&(s="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.",console.error(s)),a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height,a.fps=o.fps,a.imagesPath=o.images}if(i.bones)for(var l=0;l<i.bones.length;l++){var h=i.bones[l],c=null,u=this.getValue(h,"parent",null);if(null!=u&&null==(c=a.findBone(u)))throw new Error("Parent bone not found: "+u);(m=new t.BoneData(a.bones.length,h.name,c)).length=this.getValue(h,"length",0)*n,m.x=this.getValue(h,"x",0)*n,m.y=this.getValue(h,"y",0)*n,m.rotation=this.getValue(h,"rotation",0),m.scaleX=this.getValue(h,"scaleX",1),m.scaleY=this.getValue(h,"scaleY",1),m.shearX=this.getValue(h,"shearX",0),m.shearY=this.getValue(h,"shearY",0),m.transformMode=e.transformModeFromString(this.getValue(h,"transform","normal")),m.skinRequired=this.getValue(h,"skin",!1),a.bones.push(m)}if(i.slots)for(l=0;l<i.slots.length;l++){var d=(I=i.slots[l]).name,f=I.bone,p=a.findBone(f);if(null==p)throw new Error("Slot bone not found: "+f);var m=new t.SlotData(a.slots.length,d,p),g=this.getValue(I,"color",null);null!=g&&m.color.setFromString(g);var v=this.getValue(I,"dark",null);null!=v&&(m.darkColor=new t.Color(1,1,1,1),m.darkColor.setFromString(v)),m.attachmentName=this.getValue(I,"attachment",null),m.blendMode=e.blendModeFromString(this.getValue(I,"blend","normal")),a.slots.push(m)}if(i.ik)for(l=0;l<i.ik.length;l++){var y=i.ik[l];(m=new t.IkConstraintData(y.name)).order=this.getValue(y,"order",0),m.skinRequired=this.getValue(y,"skin",!1);for(var x=0;x<y.bones.length;x++){if(f=y.bones[x],null==(b=a.findBone(f)))throw new Error("IK bone not found: "+f);m.bones.push(b)}var M=y.target;if(m.target=a.findBone(M),null==m.target)throw new Error("IK target bone not found: "+M);m.mix=this.getValue(y,"mix",1),m.softness=this.getValue(y,"softness",0)*n,m.bendDirection=this.getValue(y,"bendPositive",!0)?1:-1,m.compress=this.getValue(y,"compress",!1),m.stretch=this.getValue(y,"stretch",!1),m.uniform=this.getValue(y,"uniform",!1),a.ikConstraints.push(m)}if(i.transform)for(l=0;l<i.transform.length;l++){for(y=i.transform[l],(m=new t.TransformConstraintData(y.name)).order=this.getValue(y,"order",0),m.skinRequired=this.getValue(y,"skin",!1),x=0;x<y.bones.length;x++){if(f=y.bones[x],null==(b=a.findBone(f)))throw new Error("Transform constraint bone not found: "+f);m.bones.push(b)}if(M=y.target,m.target=a.findBone(M),null==m.target)throw new Error("Transform constraint target bone not found: "+M);m.local=this.getValue(y,"local",!1),m.relative=this.getValue(y,"relative",!1),m.offsetRotation=this.getValue(y,"rotation",0),m.offsetX=this.getValue(y,"x",0)*n,m.offsetY=this.getValue(y,"y",0)*n,m.offsetScaleX=this.getValue(y,"scaleX",0),m.offsetScaleY=this.getValue(y,"scaleY",0),m.offsetShearY=this.getValue(y,"shearY",0),m.rotateMix=this.getValue(y,"rotateMix",1),m.translateMix=this.getValue(y,"translateMix",1),m.scaleMix=this.getValue(y,"scaleMix",1),m.shearMix=this.getValue(y,"shearMix",1),a.transformConstraints.push(m)}if(i.path)for(l=0;l<i.path.length;l++){for(y=i.path[l],(m=new t.PathConstraintData(y.name)).order=this.getValue(y,"order",0),m.skinRequired=this.getValue(y,"skin",!1),x=0;x<y.bones.length;x++){if(f=y.bones[x],null==(b=a.findBone(f)))throw new Error("Transform constraint bone not found: "+f);m.bones.push(b)}if(M=y.target,m.target=a.findSlot(M),null==m.target)throw new Error("Path target slot not found: "+M);m.positionMode=e.positionModeFromString(this.getValue(y,"positionMode","percent")),m.spacingMode=e.spacingModeFromString(this.getValue(y,"spacingMode","length")),m.rotateMode=e.rotateModeFromString(this.getValue(y,"rotateMode","tangent")),m.offsetRotation=this.getValue(y,"rotation",0),m.position=this.getValue(y,"position",0),m.positionMode==t.PositionMode.Fixed&&(m.position*=n),m.spacing=this.getValue(y,"spacing",0),m.spacingMode!=t.SpacingMode.Length&&m.spacingMode!=t.SpacingMode.Fixed||(m.spacing*=n),m.rotateMix=this.getValue(y,"rotateMix",1),m.translateMix=this.getValue(y,"translateMix",1),a.pathConstraints.push(m)}if(i.skins)for(l=0;l<i.skins.length;l++){var w=i.skins[l],E=new t.Skin(w.name);if(w.bones)for(var T=0;T<w.bones.length;T++){var b;if(null==(b=a.findBone(w.bones[T])))throw new Error("Skin bone not found: "+w.bones[l]);E.bones.push(b)}if(w.ik)for(T=0;T<w.ik.length;T++){if(null==(S=a.findIkConstraint(w.ik[T])))throw new Error("Skin IK constraint not found: "+w.ik[l]);E.constraints.push(S)}if(w.transform)for(T=0;T<w.transform.length;T++){if(null==(S=a.findTransformConstraint(w.transform[T])))throw new Error("Skin transform constraint not found: "+w.transform[l]);E.constraints.push(S)}if(w.path)for(T=0;T<w.path.length;T++){var S;if(null==(S=a.findPathConstraint(w.path[T])))throw new Error("Skin path constraint not found: "+w.path[l]);E.constraints.push(S)}for(var d in w.attachments){var A=a.findSlot(d);if(null==A)throw new Error("Slot not found: "+d);var I=w.attachments[d];for(var R in I){var C=this.readAttachment(I[R],E,A.index,R,a);null!=C&&E.setAttachment(A.index,R,C)}}a.skins.push(E),"default"==E.name&&(a.defaultSkin=E)}l=0;for(var P=this.linkedMeshes.length;l<P;l++){var k=this.linkedMeshes[l];if(null==(E=null==k.skin?a.defaultSkin:a.findSkin(k.skin)))throw new Error("Skin not found: "+k.skin);var V=E.getAttachment(k.slotIndex,k.parent);if(null==V)throw new Error("Parent mesh not found: "+k.parent);k.mesh.deformAttachment=k.inheritDeform?V:k.mesh,k.mesh.setParentMesh(V)}if(this.linkedMeshes.length=0,i.events)for(var N in i.events){var F=i.events[N];(m=new t.EventData(N)).intValue=this.getValue(F,"int",0),m.floatValue=this.getValue(F,"float",0),m.stringValue=this.getValue(F,"string",""),m.audioPath=this.getValue(F,"audio",null),null!=m.audioPath&&(m.volume=this.getValue(F,"volume",1),m.balance=this.getValue(F,"balance",0)),a.events.push(m)}if(i.animations)for(var O in i.animations){var D=i.animations[O];this.readAnimation(D,O,a)}return a},e.prototype.readAttachment=function(e,n,a,i,o){var s=this.scale;switch(i=this.getValue(e,"name",i),this.getValue(e,"type","region")){case"region":var l=this.getValue(e,"path",i),h=this.attachmentLoader.newRegionAttachment(n,i,l);return null==h?null:(h.path=l,h.x=this.getValue(e,"x",0)*s,h.y=this.getValue(e,"y",0)*s,h.scaleX=this.getValue(e,"scaleX",1),h.scaleY=this.getValue(e,"scaleY",1),h.rotation=this.getValue(e,"rotation",0),h.width=e.width*s,h.height=e.height*s,null!=(x=this.getValue(e,"color",null))&&h.color.setFromString(x),h);case"boundingbox":var c=this.attachmentLoader.newBoundingBoxAttachment(n,i);return null==c?null:(this.readVertices(e,c,e.vertexCount<<1),null!=(x=this.getValue(e,"color",null))&&c.color.setFromString(x),c);case"mesh":case"linkedmesh":l=this.getValue(e,"path",i);var u=this.attachmentLoader.newMeshAttachment(n,i,l);if(null==u)return null;u.path=l,null!=(x=this.getValue(e,"color",null))&&u.color.setFromString(x),u.width=this.getValue(e,"width",0)*s,u.height=this.getValue(e,"height",0)*s;var d=this.getValue(e,"parent",null);if(null!=d)return this.linkedMeshes.push(new r(u,this.getValue(e,"skin",null),a,d,this.getValue(e,"deform",!0))),u;var f=e.uvs;return this.readVertices(e,u,f.length),u.triangles=e.triangles,u.regionUVs=new Float32Array(f),u.edges=this.getValue(e,"edges",null),u.hullLength=2*this.getValue(e,"hull",0),u;case"path":if(null==(l=this.attachmentLoader.newPathAttachment(n,i)))return null;l.closed=this.getValue(e,"closed",!1),l.constantSpeed=this.getValue(e,"constantSpeed",!0);var p=e.vertexCount;this.readVertices(e,l,p<<1);for(var m=t.Utils.newArray(p/3,0),g=0;g<e.lengths.length;g++)m[g]=e.lengths[g]*s;return l.lengths=m,null!=(x=this.getValue(e,"color",null))&&l.color.setFromString(x),l;case"point":var v=this.attachmentLoader.newPointAttachment(n,i);return null==v?null:(v.x=this.getValue(e,"x",0)*s,v.y=this.getValue(e,"y",0)*s,v.rotation=this.getValue(e,"rotation",0),null!=(x=this.getValue(e,"color",null))&&v.color.setFromString(x),v);case"clipping":var y=this.attachmentLoader.newClippingAttachment(n,i);if(null==y)return null;var x,M=this.getValue(e,"end",null);if(null!=M){var w=o.findSlot(M);if(null==w)throw new Error("Clipping end slot not found: "+M);y.endSlot=w}return p=e.vertexCount,this.readVertices(e,y,p<<1),null!=(x=this.getValue(e,"color",null))&&y.color.setFromString(x),y}return null},e.prototype.readVertices=function(e,r,n){var a=this.scale;r.worldVerticesLength=n;var i=e.vertices;if(n!=i.length){var o=new Array,s=new Array;for(u=0,d=i.length;u<d;){var l=i[u++];s.push(l);for(var h=u+4*l;u<h;u+=4)s.push(i[u]),o.push(i[u+1]*a),o.push(i[u+2]*a),o.push(i[u+3])}r.bones=s,r.vertices=t.Utils.toFloatArray(o)}else{var c=t.Utils.toFloatArray(i);if(1!=a)for(var u=0,d=i.length;u<d;u++)c[u]*=a;r.vertices=c}},e.prototype.readAnimation=function(e,r,n){var a=this.scale,i=new Array,o=0;if(e.slots)for(var s in e.slots){var l=e.slots[s];if(-1==(Q=n.findSlotIndex(s)))throw new Error("Slot not found: "+s);for(var h in l){var c=l[h];if("attachment"==h){(M=new t.AttachmentTimeline(c.length)).slotIndex=Q;for(var u=0,d=0;d<c.length;d++){var f=c[d];M.setFrame(u++,this.getValue(f,"time",0),f.name)}i.push(M),o=Math.max(o,M.frames[M.getFrameCount()-1])}else if("color"==h){for((M=new t.ColorTimeline(c.length)).slotIndex=Q,u=0,d=0;d<c.length;d++){f=c[d];var p=new t.Color;p.setFromString(f.color||"ffffffff"),M.setFrame(u,this.getValue(f,"time",0),p.r,p.g,p.b,p.a),this.readCurve(f,M,u),u++}i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+s+")");for((M=new t.TwoColorTimeline(c.length)).slotIndex=Q,u=0,d=0;d<c.length;d++){f=c[d];var m=new t.Color,g=new t.Color;m.setFromString(f.light),g.setFromString(f.dark),M.setFrame(u,this.getValue(f,"time",0),m.r,m.g,m.b,m.a,g.r,g.g,g.b),this.readCurve(f,M,u),u++}i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var v in e.bones){var y=e.bones[v],x=n.findBoneIndex(v);if(-1==x)throw new Error("Bone not found: "+v);for(var h in y)if(c=y[h],"rotate"===h){for((M=new t.RotateTimeline(c.length)).boneIndex=x,u=0,d=0;d<c.length;d++)f=c[d],M.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"angle",0)),this.readCurve(f,M,u),u++;i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+v+")");var M=null,w=1,E=0;for("scale"===h?(M=new t.ScaleTimeline(c.length),E=1):"shear"===h?M=new t.ShearTimeline(c.length):(M=new t.TranslateTimeline(c.length),w=a),M.boneIndex=x,u=0,d=0;d<c.length;d++){f=c[d];var T=this.getValue(f,"x",E),b=this.getValue(f,"y",E);M.setFrame(u,this.getValue(f,"time",0),T*w,b*w),this.readCurve(f,M,u),u++}i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}if(e.ik)for(var S in e.ik){var A=e.ik[S],I=n.findIkConstraint(S);for((M=new t.IkConstraintTimeline(A.length)).ikConstraintIndex=n.ikConstraints.indexOf(I),u=0,d=0;d<A.length;d++)f=A[d],M.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"mix",1),this.getValue(f,"softness",0)*a,this.getValue(f,"bendPositive",!0)?1:-1,this.getValue(f,"compress",!1),this.getValue(f,"stretch",!1)),this.readCurve(f,M,u),u++;i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var S in e.transform){for(A=e.transform[S],I=n.findTransformConstraint(S),(M=new t.TransformConstraintTimeline(A.length)).transformConstraintIndex=n.transformConstraints.indexOf(I),u=0,d=0;d<A.length;d++)f=A[d],M.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1),this.getValue(f,"scaleMix",1),this.getValue(f,"shearMix",1)),this.readCurve(f,M,u),u++;i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var S in e.path){A=e.path[S];var R=n.findPathConstraintIndex(S);if(-1==R)throw new Error("Path constraint not found: "+S);var C=n.pathConstraints[R];for(var h in A)if(c=A[h],"position"===h||"spacing"===h){for(M=null,w=1,"spacing"===h?(M=new t.PathConstraintSpacingTimeline(c.length),C.spacingMode!=t.SpacingMode.Length&&C.spacingMode!=t.SpacingMode.Fixed||(w=a)):(M=new t.PathConstraintPositionTimeline(c.length),C.positionMode==t.PositionMode.Fixed&&(w=a)),M.pathConstraintIndex=R,u=0,d=0;d<c.length;d++)f=c[d],M.setFrame(u,this.getValue(f,"time",0),this.getValue(f,h,0)*w),this.readCurve(f,M,u),u++;i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){for((M=new t.PathConstraintMixTimeline(c.length)).pathConstraintIndex=R,u=0,d=0;d<c.length;d++)f=c[d],M.setFrame(u,this.getValue(f,"time",0),this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1)),this.readCurve(f,M,u),u++;i.push(M),o=Math.max(o,M.frames[(M.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}if(e.deform)for(var P in e.deform){var k=e.deform[P],V=n.findSkin(P);if(null!=V)for(var s in k){if(l=k[s],-1==(Q=n.findSlotIndex(s)))throw new Error("Slot not found: "+l.name);for(var h in l){c=l[h];var N=V.getAttachment(Q,h);if(null==N)throw new Error("Deform attachment not found: "+c.name);var F=null!=N.bones,O=N.vertices,D=F?O.length/3*2:O.length;(M=new t.DeformTimeline(c.length)).slotIndex=Q,M.attachment=N,u=0;for(var _=0;_<c.length;_++){f=c[_];var U=void 0,B=this.getValue(f,"vertices",null);if(null==B)U=F?t.Utils.newFloatArray(D):O;else{U=t.Utils.newFloatArray(D);var Y=this.getValue(f,"offset",0);if(t.Utils.arrayCopy(B,0,U,Y,B.length),1!=a)for(var L=(d=Y)+B.length;d<L;d++)U[d]*=a;if(!F)for(d=0;d<D;d++)U[d]+=O[d]}M.setFrame(u,this.getValue(f,"time",0),U),this.readCurve(f,M,u),u++}i.push(M),o=Math.max(o,M.frames[M.getFrameCount()-1])}}else if(t.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+P)}var X=e.drawOrder;if(null==X&&(X=e.draworder),null!=X){M=new t.DrawOrderTimeline(X.length);var W=n.slots.length;for(u=0,_=0;_<X.length;_++){var q=X[_],j=null,H=this.getValue(q,"offsets",null);if(null!=H){j=t.Utils.newArray(W,-1);var G=t.Utils.newArray(W-H.length,0),z=0,Z=0;for(d=0;d<H.length;d++){var Q,J=H[d];if(-1==(Q=n.findSlotIndex(J.slot)))throw new Error("Slot not found: "+J.slot);for(;z!=Q;)G[Z++]=z++;j[z+J.offset]=z++}for(;z<W;)G[Z++]=z++;for(d=W-1;d>=0;d--)-1==j[d]&&(j[d]=G[--Z])}M.setFrame(u++,this.getValue(q,"time",0),j)}i.push(M),o=Math.max(o,M.frames[M.getFrameCount()-1])}if(e.events){for(M=new t.EventTimeline(e.events.length),u=0,d=0;d<e.events.length;d++){var K=e.events[d],$=n.findEvent(K.name);if(null==$)throw new Error("Event not found: "+K.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(K,"time",0)),$);tt.intValue=this.getValue(K,"int",$.intValue),tt.floatValue=this.getValue(K,"float",$.floatValue),tt.stringValue=this.getValue(K,"string",$.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(K,"volume",1),tt.balance=this.getValue(K,"balance",0)),M.setFrame(u++,tt)}i.push(M),o=Math.max(o,M.frames[M.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new t.Animation(r,i,o))},e.prototype.readCurve=function(t,e,r){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(r);else{var n=t.curve;e.setCurve(r,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,r){return void 0!==t[e]?t[e]:r},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var r=function(t,e,r,n,a){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritDeform=a}}(t.core||(t.core={}))}(u||(u={})),function(t){!function(t){var e=function(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r};t.SkinEntry=e;var r=function(){function r(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return r.prototype.setAttachment=function(t,e,r){if(null==r)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r},r.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],n=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==r){n=!0;break}n||this.bones.push(r)}for(e=0;e<t.constraints.length;e++){var i=t.constraints[e];for(n=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==i){n=!0;break}n||this.constraints.push(i)}var o=t.getAttachments();for(e=0;e<o.length;e++){var s=o[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},r.prototype.copySkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],a=!1,i=0;i<this.bones.length;i++)if(this.bones[i]==n){a=!0;break}a||this.bones.push(n)}for(r=0;r<e.constraints.length;r++){var o=e.constraints[r];for(a=!1,i=0;i<this.constraints.length;i++)if(this.constraints[i]==o){a=!0;break}a||this.constraints.push(o)}var s=e.getAttachments();for(r=0;r<s.length;r++){var l=s[r];null!=l.attachment&&(l.attachment instanceof t.MeshAttachment?(l.attachment=l.attachment.newLinkedMesh(),this.setAttachment(l.slotIndex,l.name,l.attachment)):(l.attachment=l.attachment.copy(),this.setAttachment(l.slotIndex,l.name,l.attachment)))}},r.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},r.prototype.removeAttachment=function(t,e){var r=this.attachments[t];r&&(r[e]=null)},r.prototype.getAttachments=function(){for(var t=new Array,r=0;r<this.attachments.length;r++){var n=this.attachments[r];if(n)for(var a in n){var i=n[a];i&&t.push(new e(r,a,i))}}return t},r.prototype.getAttachmentsForSlot=function(t,r){var n=this.attachments[t];if(n)for(var a in n){var i=n[a];i&&r.push(new e(t,a,i))}},r.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},r.prototype.attachAll=function(t,e){for(var r=0,n=0;n<t.slots.length;n++){var a=t.slots[n],i=a.getAttachment();if(i&&r<e.attachments.length){var o=e.attachments[r];for(var s in o)if(i==o[s]){var l=this.getAttachment(r,s);null!=l&&a.setAttachment(l);break}}r++}},r}();t.Skin=r}(t.core||(t.core={}))}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t,r){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==r)throw new Error("bone cannot be null.");this.data=t,this.bone=r,this.color=new e.Color,this.darkColor=null==t.darkColor?null:new e.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),e.Slot=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t,r,n){if(this.color=new e.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==r)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=r,this.boneData=n},e.SlotData=r}(u||(u={})),function(t){!function(t){var e,r,n=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=n,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(r=t.TextureWrap||(t.TextureWrap={}));var a=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==l.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==l.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==l.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==l.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!1,configurable:!0}),t}();t.TextureRegion=a}(t.core||(t.core={}))}(u||(u={})),function(t){!function(t){var e=function(){function e(t,e,r){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,r)}return e.prototype.addTexture=function(e,r){for(var i=this.pages,o=null,s=0;s<i.length;s++)if(i[s].baseTexture===r.baseTexture){o=i[s];break}if(null===o){(o=new n).name="texturePage";var l=r.baseTexture;o.width=l.realWidth,o.height=l.realHeight,o.baseTexture=l,o.minFilter=o.magFilter=t.TextureFilter.Nearest,o.uWrap=t.TextureWrap.ClampToEdge,o.vWrap=t.TextureWrap.ClampToEdge,i.push(o)}var h=new a;return h.name=e,h.page=o,h.texture=r,h.index=-1,this.regions.push(h),h},e.prototype.addTextureHash=function(t,e){for(var r in t)t.hasOwnProperty(r)&&this.addTexture(e&&-1!==r.indexOf(".")?r.substr(0,r.lastIndexOf(".")):r,t[r])},e.prototype.addSpineAtlas=function(t,e,r){return this.load(t,e,r)},e.prototype.load=function(e,i,o){var s=this;if(null==i)throw new Error("textureLoader cannot be null.");var h=new r(e),c=new Array(4),u=null,d=function(){for(;;){var e=h.readLine();if(null==e)return o&&o(s);if(0==(e=e.trim()).length)u=null;else{if(!u){(u=new n).name=e,2==h.readTuple(c)&&(u.width=parseInt(c[0]),u.height=parseInt(c[1]),h.readTuple(c)),h.readTuple(c),u.minFilter=t.Texture.filterFromString(c[0]),u.magFilter=t.Texture.filterFromString(c[1]);var r=h.readValue();u.uWrap=t.TextureWrap.ClampToEdge,u.vWrap=t.TextureWrap.ClampToEdge,"x"==r?u.uWrap=t.TextureWrap.Repeat:"y"==r?u.vWrap=t.TextureWrap.Repeat:"xy"==r&&(u.uWrap=u.vWrap=t.TextureWrap.Repeat),i(e,(function(t){if(null===t)return s.pages.splice(s.pages.indexOf(u),1),o&&o(null);u.baseTexture=t,t.hasLoaded||(t.width=u.width,t.height=u.height),s.pages.push(u),u.setFilters(),u.width&&u.height||(u.width=t.realWidth,u.height=t.realHeight,u.width&&u.height||console.log("ERROR spine atlas page "+u.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),d()})),s.pages.push(u);break}var f=new a;f.name=e,f.page=u;var p=h.readValue(),m=0;m="true"==p.toLocaleLowerCase()?6:"false"==p.toLocaleLowerCase()?0:(720-parseFloat(p))%360/45,h.readTuple(c);var g=parseInt(c[0]),v=parseInt(c[1]);h.readTuple(c);var y=parseInt(c[0]),x=parseInt(c[1]),M=u.baseTexture.resolution;g/=M,v/=M,y/=M,x/=M;var w=m%4!=0,E=new l.Rectangle(g,v,w?x:y,w?y:x);4==h.readTuple(c)&&4==h.readTuple(c)&&h.readTuple(c);var T=parseInt(c[0])/M,b=parseInt(c[1])/M;h.readTuple(c);var S=parseInt(c[0])/M,A=parseInt(c[1])/M,I=new l.Rectangle(0,0,T,b),R=new l.Rectangle(S,b-x-A,y,x);if("3"!=l.VERSION[0])f.texture=new l.Texture(f.page.baseTexture,E,I,R,m);else{var C=new l.Rectangle(g,v,y,x),P=C.clone();R.width=T,R.height=b,f.texture=new l.Texture(f.page.baseTexture,C,P,R,m)}f.index=parseInt(h.readValue()),f.texture._updateUvs(),s.regions.push(f)}}};d()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var r=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),r=e.indexOf(":");if(-1==r)throw new Error("Invalid line: "+e);for(var n=0,a=r+1;n<3;n++){var i=e.indexOf(",",a);if(-1==i)break;t[n]=e.substr(a,i-a).trim(),a=i+1}return t[n]=e.substring(a).trim(),n+1},t}(),n=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,r=this.minFilter;r==t.TextureFilter.Linear?e.scaleMode=l.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=l.SCALE_MODES.NEAREST:(e.mipmap=!0,r==t.TextureFilter.MipMapNearestNearest?e.scaleMode=l.SCALE_MODES.NEAREST:e.scaleMode=l.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=n;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=a}(t.core||(t.core={}))}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new e.Vector2,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==r)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(r.findBone(t.bones[n].name));this.target=r.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,a=this.shearMix,i=this.target,o=i.matrix,s=o.a,l=o.c,h=o.b,c=o.d,u=s*c-l*h>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*u,f=this.data.offsetShearY*u,p=this.bones,m=0,g=p.length;m<g;m++){var v=p[m],y=!1,x=v.matrix;if(0!=t){var M=x.a,w=x.c,E=x.b,T=x.d;(C=Math.atan2(h,s)-Math.atan2(E,M)+d)>e.MathUtils.PI?C-=e.MathUtils.PI2:C<-e.MathUtils.PI&&(C+=e.MathUtils.PI2),C*=t;var b=Math.cos(C),S=Math.sin(C);x.a=b*M-S*E,x.c=b*w-S*T,x.b=S*M+b*E,x.d=S*w+b*T,y=!0}if(0!=r){var A=this.temp;i.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),x.tx+=(A.x-x.tx)*r,x.ty+=(A.y-x.ty)*r,y=!0}if(n>0){var I=Math.sqrt(x.a*x.a+x.b*x.b),R=Math.sqrt(s*s+h*h);I>1e-5&&(I=(I+(R-I+this.data.offsetScaleX)*n)/I),x.a*=I,x.b*=I,I=Math.sqrt(x.c*x.c+x.d*x.d),R=Math.sqrt(l*l+c*c),I>1e-5&&(I=(I+(R-I+this.data.offsetScaleY)*n)/I),x.c*=I,x.d*=I,y=!0}if(a>0){w=x.c,T=x.d;var C,P=Math.atan2(T,w);(C=Math.atan2(c,l)-Math.atan2(h,s)-(P-Math.atan2(x.b,x.a)))>e.MathUtils.PI?C-=e.MathUtils.PI2:C<-e.MathUtils.PI&&(C+=e.MathUtils.PI2),C=P+(C+f)*a,I=Math.sqrt(w*w+T*T),x.c=Math.cos(C)*I,x.d=Math.sin(C)*I,y=!0}y&&(v.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,a=this.shearMix,i=this.target,o=i.matrix,s=o.a,l=o.c,h=o.b,c=o.d,u=s*c-l*h>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*u,f=this.data.offsetShearY*u,p=this.bones,m=0,g=p.length;m<g;m++){var v,y=p[m],x=!1,M=y.matrix;if(0!=t){var w=M.a,E=M.c,T=M.b,b=M.d;(v=Math.atan2(h,s)+d)>e.MathUtils.PI?v-=e.MathUtils.PI2:v<-e.MathUtils.PI&&(v+=e.MathUtils.PI2),v*=t;var S=Math.cos(v),A=Math.sin(v);M.a=S*w-A*T,M.c=S*E-A*b,M.b=A*w+S*T,M.d=A*E+S*b,x=!0}if(0!=r){var I=this.temp;i.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),M.tx+=I.x*r,M.ty+=I.y*r,x=!0}if(n>0){var R=(Math.sqrt(s*s+h*h)-1+this.data.offsetScaleX)*n+1;M.a*=R,M.b*=R,R=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleY)*n+1,M.c*=R,M.d*=R,x=!0}a>0&&((v=Math.atan2(c,l)-Math.atan2(h,s))>e.MathUtils.PI?v-=e.MathUtils.PI2:v<-e.MathUtils.PI&&(v+=e.MathUtils.PI2),E=M.c,b=M.d,v=Math.atan2(b,E)+(v-e.MathUtils.PI/2+f)*a,R=Math.sqrt(E*E+b*b),M.c=Math.cos(v)*R,M.d=Math.sin(v)*R,x=!0),x&&(y.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var i=this.bones,o=0,s=i.length;o<s;o++){var l=i[o];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;if(0!=t){var c=a.arotation-h+this.data.offsetRotation;h+=(c-=360*(16384-(16384.499999999996-c/360|0)))*t}var u=l.ax,d=l.ay;0!=e&&(u+=(a.ax-u+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*e);var f=l.ascaleX,p=l.ascaleY;r>0&&(f>1e-5&&(f=(f+(a.ascaleX-f+this.data.offsetScaleX)*r)/f),p>1e-5&&(p=(p+(a.ascaleY-p+this.data.offsetScaleY)*r)/p));var m=l.ashearY;n>0&&(c=a.ashearY-m+this.data.offsetShearY,c-=360*(16384-(16384.499999999996-c/360|0)),l.shearY+=c*n),l.updateWorldTransformWith(u,d,h,f,p,l.ashearX,m)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,r=this.scaleMix,n=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var i=this.bones,o=0,s=i.length;o<s;o++){var l=i[o];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;0!=t&&(h+=(a.arotation+this.data.offsetRotation)*t);var c=l.ax,u=l.ay;0!=e&&(c+=(a.ax+this.data.offsetX)*e,u+=(a.ay+this.data.offsetY)*e);var d=l.ascaleX,f=l.ascaleY;r>0&&(d>1e-5&&(d*=(a.ascaleX-1+this.data.offsetScaleX)*r+1),f>1e-5&&(f*=(a.ascaleY-1+this.data.offsetScaleY)*r+1));var p=l.ashearY;n>0&&(p+=(a.ashearY+this.data.offsetShearY)*n),l.updateWorldTransformWith(c,u,h,d,f,l.ashearX,p)}},t}(),e.TransformConstraint=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=new Array,r.rotateMix=0,r.translateMix=0,r.scaleMix=0,r.shearMix=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return d(e,t),e}(e.ConstraintData),e.TransformConstraintData=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new e.Pool((function(){return new Array})),this.polygonIndicesPool=new e.Pool((function(){return new Array}))}return t.prototype.triangulate=function(e){var r=e,n=e.length>>1,a=this.indicesArray;a.length=0;for(var i=0;i<n;i++)a[i]=i;var o=this.isConcaveArray;o.length=0,i=0;for(var s=n;i<s;++i)o[i]=t.isConcave(i,n,r,a);var l=this.triangles;for(l.length=0;n>3;){for(var h=n-1,c=(i=0,1);;){t:if(!o[i]){for(var u=a[h]<<1,d=a[i]<<1,f=a[c]<<1,p=r[u],m=r[u+1],g=r[d],v=r[d+1],y=r[f],x=r[f+1],M=(c+1)%n;M!=h;M=(M+1)%n)if(o[M]){var w=a[M]<<1,E=r[w],T=r[w+1];if(t.positiveArea(y,x,p,m,E,T)&&t.positiveArea(p,m,g,v,E,T)&&t.positiveArea(g,v,y,x,E,T))break t}break}if(0==c){do{if(!o[i])break;i--}while(i>0);break}h=i,i=c,c=(c+1)%n}l.push(a[(n+i-1)%n]),l.push(a[i]),l.push(a[(i+1)%n]),a.splice(i,1),o.splice(i,1);var b=(--n+i-1)%n,S=i==n?0:i;o[b]=t.isConcave(b,n,r,a),o[S]=t.isConcave(S,n,r,a)}return 3==n&&(l.push(a[2]),l.push(a[0]),l.push(a[1])),l},t.prototype.decompose=function(e,r){var n=e,a=this.convexPolygons;this.polygonPool.freeAll(a),a.length=0;var i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;var o=this.polygonIndicesPool.obtain();o.length=0;var s=this.polygonPool.obtain();s.length=0;for(var l=-1,h=0,c=0,u=r.length;c<u;c+=3){var d=r[c]<<1,f=r[c+1]<<1,p=r[c+2]<<1,m=n[d],g=n[d+1],v=n[f],y=n[f+1],x=n[p],M=n[p+1],w=!1;if(l==d){var E=s.length-4,T=t.winding(s[E],s[E+1],s[E+2],s[E+3],x,M),b=t.winding(x,M,s[0],s[1],s[2],s[3]);T==h&&b==h&&(s.push(x),s.push(M),o.push(p),w=!0)}w||(s.length>0?(a.push(s),i.push(o)):(this.polygonPool.free(s),this.polygonIndicesPool.free(o)),(s=this.polygonPool.obtain()).length=0,s.push(m),s.push(g),s.push(v),s.push(y),s.push(x),s.push(M),(o=this.polygonIndicesPool.obtain()).length=0,o.push(d),o.push(f),o.push(p),h=t.winding(m,g,v,y,x,M),l=d)}for(s.length>0&&(a.push(s),i.push(o)),c=0,u=a.length;c<u;c++)if(0!=(o=i[c]).length)for(var S=o[0],A=o[o.length-1],I=(s=a[c])[E=s.length-4],R=s[E+1],C=s[E+2],P=s[E+3],k=s[0],V=s[1],N=s[2],F=s[3],O=t.winding(I,R,C,P,k,V),D=0;D<u;D++)if(D!=c){var _=i[D];if(3==_.length){var U=_[0],B=_[1],Y=_[2],L=a[D];x=L[L.length-2],M=L[L.length-1],U==S&&B==A&&(T=t.winding(I,R,C,P,x,M),b=t.winding(x,M,k,V,N,F),T==O&&b==O&&(L.length=0,_.length=0,s.push(x),s.push(M),o.push(Y),I=C,R=P,C=x,P=M,D=0))}}for(c=a.length-1;c>=0;c--)0==(s=a[c]).length&&(a.splice(c,1),this.polygonPool.free(s),o=i[c],i.splice(c,1),this.polygonIndicesPool.free(o));return a},t.isConcave=function(t,e,r,n){var a=n[(e+t-1)%e]<<1,i=n[t]<<1,o=n[(t+1)%e]<<1;return!this.positiveArea(r[a],r[a+1],r[i],r[i+1],r[o],r[o+1])},t.positiveArea=function(t,e,r,n,a,i){return t*(i-n)+r*(e-i)+a*(n-e)>=0},t.winding=function(t,e,r,n,a,i){var o=r-t,s=n-e;return a*s-i*o+o*e-t*s>=0?1:-1},t}(),e.Triangulator=r}(u||(u={})),function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var r=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=r,this.a=n}return t.prototype.set=function(t,e,r,n){return this.r=t,this.g=e,this.b=r,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,r,n){return this.r+=t,this.g+=e,this.b+=r,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=r;var n=function(){function t(){}return t.clamp=function(t,e,r){return t<e?e:t>r?r:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,r){return t.randomTriangularWith(e,r,.5*(e+r))},t.randomTriangularWith=function(t,e,r){var n=Math.random(),a=e-t;return n<=(r-t)/a?t+Math.sqrt(n*a*(r-t)):e-Math.sqrt((1-n)*a*(e-r))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=n;var a=function(){function t(){}return t.prototype.apply=function(t,e,r){return t+(e-t)*this.applyInternal(r)},t}();t.Interpolation=a;var i=function(t){function e(e){var r=t.call(this)||this;return r.power=2,r.power=e,r}return d(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(a);t.Pow=i;var o=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(i);t.PowOut=o;var s=function(){function t(){}return t.arrayCopy=function(t,e,r,n,a){for(var i=e,o=n;i<e+a;i++,o++)r[o]=t[i]},t.setArraySize=function(t,e,r){void 0===r&&(r=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var a=n;a<e;a++)t[a]=r;return t},t.ensureArrayCapacity=function(e,r,n){return void 0===n&&(n=0),e.length>=r?e:t.setArraySize(e,r,n)},t.newArray=function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=e;return r},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var r=new Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var r=new Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,r){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=s;var l=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var r=t.bones[e],n=r.matrix;console.log(r.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t}();t.DebugUtils=l;var h=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=h;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=c;var u=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=u;var f=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=f}(t.core||(t.core={}))}(u||(u={})),function(t){!function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=e;var r=function(e){function r(t){var n=e.call(this,t)||this;return n.id=(65535&r.nextID++)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return d(r,e),r.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},r.prototype.computeWorldVertices=function(t,e,r,n,a,i){r=a+(r>>1)*i;var o=t.bone.skeleton,s=t.deform,l=this.vertices,h=this.bones;if(null!=h){for(var c=0,u=0,d=0;d<e;d+=2)c+=(g=h[c])+1,u+=g;var f=o.bones;if(0==s.length)for(R=a,b=3*u;R<r;R+=i){var p=0,m=0,g=h[c++];for(g+=c;c<g;c++,b+=3){M=f[h[c]].matrix,C=l[b],P=l[b+1];var v=l[b+2];p+=(C*M.a+P*M.c+M.tx)*v,m+=(C*M.b+P*M.d+M.ty)*v}n[R]=p,n[R+1]=m}else for(var y=s,x=(R=a,b=3*u,u<<1);R<r;R+=i){for(p=0,m=0,g=h[c++],g+=c;c<g;c++,b+=3,x+=2)M=f[h[c]].matrix,C=l[b]+y[x],P=l[b+1]+y[x+1],v=l[b+2],p+=(C*M.a+P*M.c+M.tx)*v,m+=(C*M.b+P*M.d+M.ty)*v;n[R]=p,n[R+1]=m}}else{s.length>0&&(l=s);for(var M,w=(M=t.bone.matrix).tx,E=M.ty,T=M.a,b=M.c,S=M.b,A=M.d,I=e,R=a;R<r;I+=2,R+=i){var C=l[I],P=l[I+1];n[R]=C*T+P*b+w,n[R+1]=C*S+P*A+E}}},r.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},r.nextID=0,r}(e);t.VertexAttachment=r}(t.core||(t.core={}))}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),(r=e.AttachmentType||(e.AttachmentType={}))[r.Region=0]="Region",r[r.BoundingBox=1]="BoundingBox",r[r.Mesh=2]="Mesh",r[r.LinkedMesh=3]="LinkedMesh",r[r.Path=4]="Path",r[r.Point=5]="Point",r[r.Clipping=6]="Clipping"}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function r(r){var n=t.call(this,r)||this;return n.color=new e.Color(1,1,1,1),n}return d(r,t),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},r}(e.VertexAttachment),e.BoundingBoxAttachment=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function r(r){var n=t.call(this,r)||this;return n.color=new e.Color(.2275,.2275,.8078,1),n}return d(r,t),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},r}(e.VertexAttachment),e.ClippingAttachment=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function r(r){var n=t.call(this,r)||this;return n.color=new e.Color(1,1,1,1),n.tempColor=new e.Color(0,0,0,0),n}return d(r,t),r.prototype.updateUVs=function(t,r){var n=this.regionUVs.length;if(r&&r.length==n||(r=e.Utils.newFloatArray(n)),null!=t){for(var a=t.texture._uvs,i=t.width,o=t.height,s=t.originalWidth,l=t.originalHeight,h=t.offsetX,c=t.pixiOffsetY,u=0;u<n;u+=2){var d=this.regionUVs[u],f=this.regionUVs[u+1];d=(d*s-h)/i,f=(f*l-c)/o,r[u]=(a.x0*(1-d)+a.x1*d)*(1-f)+(a.x3*(1-d)+a.x2*d)*f,r[u+1]=(a.y0*(1-d)+a.y1*d)*(1-f)+(a.y3*(1-d)+a.y2*d)*f}return r}},r.prototype.getParentMesh=function(){return this.parentMesh},r.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},r.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new r(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),e.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),e.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),e.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),e.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},r.prototype.newLinkedMesh=function(){var t=new r(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},r}(e.VertexAttachment),e.MeshAttachment=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function r(r){var n=t.call(this,r)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new e.Color(1,1,1,1),n}return d(r,t),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),e.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},r}(e.VertexAttachment),e.PathAttachment=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function r(r){var n=t.call(this,r)||this;return n.color=new e.Color(.38,.94,0,1),n}return d(r,t),r.prototype.computeWorldPosition=function(t,e){var r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e},r.prototype.computeWorldRotation=function(t){var r=t.matrix,n=e.MathUtils.cosDeg(this.rotation),a=e.MathUtils.sinDeg(this.rotation),i=n*r.a+a*r.c,o=n*r.b+a*r.d;return Math.atan2(o,i)*e.MathUtils.radDeg},r.prototype.copy=function(){var t=new r(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},r}(e.VertexAttachment),e.PointAttachment=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(t){function r(r){var n=t.call(this,r)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new e.Color(1,1,1,1),n.offset=e.Utils.newFloatArray(8),n.uvs=e.Utils.newFloatArray(8),n.tempColor=new e.Color(1,1,1,1),n}return d(r,t),r.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*e,i=n+this.region.width*t,o=a+this.region.height*e,s=this.rotation*Math.PI/180,l=Math.cos(s),h=Math.sin(s),c=n*l+this.x,u=n*h,d=a*l+this.y,f=a*h,p=i*l+this.x,m=i*h,g=o*l+this.y,v=o*h,y=this.offset;y[r.OX1]=c-f,y[r.OY1]=d+u,y[r.OX2]=c-v,y[r.OY2]=g+u,y[r.OX3]=p-v,y[r.OY3]=g+m,y[r.OX4]=p-f,y[r.OY4]=d+m},r.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},r.prototype.computeWorldVertices=function(t,e,n,a){var i=this.offset,o=t.matrix,s=o.tx,l=o.ty,h=o.a,c=o.c,u=o.b,d=o.d,f=0,p=0;f=i[r.OX1],p=i[r.OY1],e[n]=f*h+p*c+s,e[n+1]=f*u+p*d+l,n+=a,f=i[r.OX2],p=i[r.OY2],e[n]=f*h+p*c+s,e[n+1]=f*u+p*d+l,n+=a,f=i[r.OX3],p=i[r.OY3],e[n]=f*h+p*c+s,e[n+1]=f*u+p*d+l,n+=a,f=i[r.OX4],p=i[r.OY4],e[n]=f*h+p*c+s,e[n+1]=f*u+p*d+l},r.prototype.copy=function(){var t=new r(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,e.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),e.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},r.OX1=0,r.OY1=1,r.OX2=2,r.OY2=3,r.OX3=4,r.OY3=5,r.OX4=6,r.OY4=7,r.X1=0,r.Y1=1,r.C1R=2,r.C1G=3,r.C1B=4,r.C1A=5,r.U1=6,r.V1=7,r.X2=8,r.Y2=9,r.C2R=10,r.C2G=11,r.C2B=12,r.C2A=13,r.U2=14,r.V2=15,r.X3=16,r.Y3=17,r.C3R=18,r.C3G=19,r.C3B=20,r.C3A=21,r.U3=22,r.V3=23,r.X4=24,r.Y4=25,r.C4R=26,r.C4G=27,r.C4B=28,r.C4A=29,r.U4=30,r.V4=31,r}(e.Attachment),e.RegionAttachment=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,r,n,a){t.x+=e.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=e.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),e.JitterEffect=r}(u||(u={})),function(t){var e,r;e=t.core||(t.core={}),r=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(r,n,a,i){var o=this.angle*e.MathUtils.degreesToRadians,s=r.x-this.worldX,l=r.y-this.worldY,h=Math.sqrt(s*s+l*l);if(h<this.radius){var c=t.interpolation.apply(0,o,(this.radius-h)/this.radius),u=Math.cos(c),d=Math.sin(c);r.x=u*s-d*l+this.worldX,r.y=d*s+u*l+this.worldY}},t.prototype.end=function(){},t.interpolation=new e.PowOut(2),t}(),e.SwirlEffect=r}(u||(u={})),Math.fround||(Math.fround=Math.fround=(c=new Float32Array(1),function(t){return c[0]=t,c[0]})),function(t){t.core.Bone.yDown=!0;var e=[0,0,0],r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e}return d(e,t),e}(l.Sprite);t.SpineSprite=r;var n=function(t){function e(e,r,n,a,i){return t.call(this,e,r,n,a,i)||this}return d(e,t),e}(l.mesh.Mesh);t.SpineMesh=n;var a=function(a){function o(e){var r=a.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');r.spineData=e,r.skeleton=new t.core.Skeleton(e),r.skeleton.updateWorldTransform(),r.stateData=new t.core.AnimationStateData(e),r.state=new t.core.AnimationState(r.stateData),r.slotContainers=[],r.tempClipContainers=[];for(var n=0,i=r.skeleton.slots.length;n<i;n++){var o=r.skeleton.slots[n],s=o.getAttachment(),l=r.newContainer();if(r.slotContainers.push(l),r.addChild(l),r.tempClipContainers.push(null),s instanceof t.core.RegionAttachment){var h=s.region.name,c=r.createSprite(o,s,h);o.currentSprite=c,o.currentSpriteName=h,l.addChild(c)}else if(s instanceof t.core.MeshAttachment){var u=r.createMesh(o,s);o.currentMesh=u,o.currentMeshName=s.name,l.addChild(u)}else{if(!(s instanceof t.core.ClippingAttachment))continue;r.createGraphics(o,s),l.addChild(o.clippingContainer),l.addChild(o.currentGraphics)}}return r.autoUpdate=!0,r.tintRgb=new Float32Array([1,1,1]),r}return d(o,a),Object.defineProperty(o.prototype,"autoUpdate",{get:function(){return this.updateTransform===o.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?o.prototype.autoUpdateTransform:l.Container.prototype.updateTransform},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"tint",{get:function(){return l.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=l.utils.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:o.globalDelayLimit)||Number.MAX_VALUE},enumerable:!1,configurable:!0}),o.prototype.update=function(r){var n=this.delayLimit;if(r>n&&(r=n),this.state.update(r),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var a=this.skeleton.slots,o=this.color,s=null,h=null;o?(s=o.light,h=o.dark):s=this.tintRgb;for(var c=l.TransformBase&&1==this.transformHack(),u=0,d=a.length;u<d;u++){var f=(N=a[u]).getAttachment(),p=this.slotContainers[u];if(f){var m=null,g=f.color;if(f instanceof t.core.RegionAttachment){var v=f.region;if(v){N.currentMesh&&(N.currentMesh.visible=!1,N.currentMesh=null,N.currentMeshName=void 0);var y=v;if(!N.currentSpriteName||N.currentSpriteName!==y.name){var x=y.name;if(N.currentSprite&&(N.currentSprite.visible=!1),N.sprites=N.sprites||{},void 0!==N.sprites[x])N.sprites[x].visible=!0;else{var M=this.createSprite(N,f,x);p.addChild(M)}N.currentSprite=N.sprites[x],N.currentSpriteName=x}}if(p.transform){var w=T=p.transform,E=null;w.matrix2d?(E=w.matrix2d,w._dirtyVersion++,w.version=w._dirtyVersion,w.isStatic=!0,w.operMode=0):c?(w.position&&((T=new l.TransformBase)._parentID=-1,T._worldID=p.transform._worldID,p.transform=T),E=T.localTransform):w.setFromMatrix(N.bone.matrix),E&&N.bone.matrix.copy(E)}else E=p.localTransform||new l.Matrix,N.bone.matrix.copy(E),p.localTransform=E,p.displayObjectUpdateTransform=i;N.currentSprite.color?m=N.currentSprite.color:(e[0]=s[0]*N.color.r*g.r,e[1]=s[1]*N.color.g*g.g,e[2]=s[2]*N.color.b*g.b,N.currentSprite.tint=l.utils.rgb2hex(e)),N.currentSprite.blendMode=N.blendMode}else if(f instanceof t.core.MeshAttachment){var T;if(N.currentSprite&&(N.currentSprite.visible=!1,N.currentSprite=null,N.currentSpriteName=void 0,p.transform?((T=new l.TransformStatic)._parentID=-1,T._worldID=p.transform._worldID,p.transform=T):(p.localTransform=new l.Matrix,p.displayObjectUpdateTransform=l.DisplayObject.prototype.updateTransform)),!N.currentMeshName||N.currentMeshName!==f.name){var b=f.name;if(N.currentMesh&&(N.currentMesh.visible=!1),N.meshes=N.meshes||{},void 0!==N.meshes[b])N.meshes[b].visible=!0;else{var S=this.createMesh(N,f);p.addChild(S)}N.currentMesh=N.meshes[b],N.currentMeshName=b}if(f.computeWorldVerticesOld(N,N.currentMesh.vertices),N.currentMesh.color)m=N.currentMesh.color;else if("3"!==l.VERSION[0]){var A=N.currentMesh.tintRgb;A[0]=s[0]*N.color.r*g.r,A[1]=s[1]*N.color.g*g.g,A[2]=s[2]*N.color.b*g.b}N.currentMesh.blendMode=N.blendMode}else{if(!(f instanceof t.core.ClippingAttachment)){p.visible=!1;continue}N.currentGraphics||(this.createGraphics(N,f),p.addChild(N.clippingContainer),p.addChild(N.currentGraphics)),this.updateGraphics(N,f)}if(p.visible=!0,m){var I=N.color.r*g.r,R=N.color.g*g.g,C=N.color.b*g.b;m.setLight(s[0]*I+h[0]*(1-I),s[1]*R+h[1]*(1-R),s[2]*C+h[2]*(1-C)),N.darkColor?(I=N.darkColor.r,R=N.darkColor.g,C=N.darkColor.b):(I=0,R=0,C=0),m.setDark(s[0]*I+h[0]*(1-I),s[1]*R+h[1]*(1-R),s[2]*C+h[2]*(1-C))}p.alpha=N.color.a}else p.visible=!1}var P=this.skeleton.drawOrder,k=null,V=null;for(u=0,d=P.length;u<d;u++){var N=a[P[u].data.index];if(p=this.slotContainers[P[u].data.index],V||null!==p.parent&&p.parent!==this&&(p.parent.removeChild(p),p.parent=this),N.currentGraphics&&N.getAttachment())V=N.clippingContainer,k=N.getAttachment(),V.children.length=0,this.children[u]=p,k.endSlot==N.data&&(k.endSlot=null);else if(V){var F=this.tempClipContainers[u];F||((F=this.tempClipContainers[u]=this.newContainer()).visible=!1),this.children[u]=F,p.parent=null,V.addChild(p),k.endSlot==N.data&&(V.renderable=!0,V=null,k=null)}else this.children[u]=p}}},o.prototype.setSpriteRegion=function(t,e,r){e.region=r,e.texture=r.texture,r.size?(e.scale.x=r.size.width/r.originalWidth,e.scale.y=-r.size.height/r.originalHeight):(e.scale.x=t.scaleX*t.width/r.originalWidth,e.scale.y=-t.scaleY*t.height/r.originalHeight)},o.prototype.setMeshRegion=function(t,e,r){e.region=r,e.texture=r.texture,r.texture._updateUvs(),t.updateUVs(r,e.uvs),e.dirty++},o.prototype.autoUpdateTransform=function(){if(o.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;l.Container.prototype.updateTransform.call(this)},o.prototype.createSprite=function(e,r,n){var a=r.region;e.hackAttachment===r&&(a=e.hackRegion);var i=a.texture,o=this.newSprite(i);return o.rotation=r.rotation*t.core.MathUtils.degRad,o.anchor.x=.5,o.anchor.y=.5,o.position.x=r.x,o.position.y=r.y,o.alpha=r.color.a,o.region=r.region,this.setSpriteRegion(r,o,r.region),e.sprites=e.sprites||{},e.sprites[n]=o,o},o.prototype.createMesh=function(t,e){var r=e.region;t.hackAttachment===e&&(r=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var n=this.newMesh(r.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),l.mesh.Mesh.DRAW_MODES.TRIANGLES);return n.canvasPadding=1.5,n.alpha=e.color.a,n.region=e.region,this.setMeshRegion(e,n,r),t.meshes=t.meshes||{},t.meshes[e.name]=n,n},o.prototype.createGraphics=function(t,e){var r=this.newGraphics(),n=new l.Polygon([]);return r.clear(),r.beginFill(16777215,1),r.drawPolygon(n),r.renderable=!1,t.currentGraphics=r,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,r},o.prototype.updateGraphics=function(t,e){var r=t.currentGraphics.graphicsData[0].shape.points,n=e.worldVerticesLength;r.length=n,e.computeWorldVertices(t,0,n,r,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},o.prototype.hackTextureBySlotIndex=function(e,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var a=this.skeleton.slots[e];if(!a)return!1;var i=a.getAttachment(),o=i.region;return r?((o=new t.core.TextureRegion).texture=r,o.size=n,a.hackRegion=o,a.hackAttachment=i):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite&&a.currentSprite.region!=o?(this.setSpriteRegion(i,a.currentSprite,o),a.currentSprite.region=o):a.currentMesh&&a.currentMesh.region!=o&&this.setMeshRegion(i,a.currentMesh,o),!0},o.prototype.hackTextureBySlotName=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=null);var n=this.skeleton.findSlotIndex(t);return-1!=n&&this.hackTextureBySlotIndex(n,e,r)},o.prototype.newContainer=function(){return new l.Container},o.prototype.newSprite=function(t){return new r(t)},o.prototype.newGraphics=function(){return new l.Graphics},o.prototype.newMesh=function(t,e,r,a,i){return new n(t,e,r,a,i)},o.prototype.transformHack=function(){return 1},o.prototype.hackAttachmentGroups=function(t,e,r){if(t){for(var n=[],a=[],i=0,o=this.skeleton.slots.length;i<o;i++){var s=this.skeleton.slots[i],l=s.currentSpriteName||s.currentMeshName||"",h=s.currentSprite||s.currentMesh;l.endsWith(t)?(h.parentGroup=e,a.push(h)):r&&h&&(h.parentGroup=r,n.push(h))}return[n,a]}},o.prototype.destroy=function(t){for(var e=0,r=this.skeleton.slots.length;e<r;e++){var n=this.skeleton.slots[e];for(var i in n.meshes)n.meshes[i].destroy(t);for(var o in n.meshes=null,n.sprites)n.sprites[o].destroy(t);n.sprites=null}for(e=0,r=this.slotContainers.length;e<r;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,a.prototype.destroy.call(this,t)},o.globalAutoUpdate=!0,o.globalDelayLimit=0,o.clippingPolygon=[],o}(l.Container);function i(){var t=this.parent.worldTransform,e=this.worldTransform,r=this.localTransform;e.a=r.a*t.a+r.b*t.c,e.b=r.a*t.b+r.b*t.d,e.c=r.c*t.a+r.d*t.c,e.d=r.c*t.b+r.d*t.d,e.tx=r.tx*t.a+r.ty*t.c+t.tx,e.ty=r.tx*t.b+r.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}t.Spine=a}(u||(u={})),function(t){l.spine=t;var e=l.Texture.prototype;e._updateUvs||(e._updateUvs=e.updateUvs)}(u||(u={})),function(t){var e=l.loaders.Resource;function r(){return function(r,i){if(!r.data)return i();var o=function(t){return t.type==e.TYPE.JSON}(r)&&r.data.bones,s=function(t){return t.xhrType==e.XHR_RESPONSE_TYPE.BUFFER}(r)&&("skel"===r.extension||r.metadata.spineMetadata);if(!o&&!s)return i();var l=null,h=r.data;o?l=new t.core.SkeletonJson(null):(l=new t.core.SkeletonBinary(null),r.data instanceof ArrayBuffer&&(h=new Uint8Array(r.data)));var c=r.metadata||{},u=c?r.metadata.spineSkeletonScale:null;u&&(l.scale=u);var d=c?r.metadata.spineAtlas:null;if(!1===d)return i();if(d&&d.pages)return l.attachmentLoader=new t.core.AtlasAttachmentLoader(d),r.spineData=l.readSkeletonData(h),r.spineAtlas=d,i();var f=c.spineAtlasSuffix||".atlas",p=r.url,m=p.indexOf("?");m>0&&(p=p.substr(0,m)),p=p.substr(0,p.lastIndexOf("."))+f,r.metadata&&r.metadata.spineAtlasFile&&(p=r.metadata.spineAtlasFile),p=p.replace(this.baseUrl,"");var g={crossOrigin:r.crossOrigin,xhrType:e.XHR_RESPONSE_TYPE.TEXT,metadata:c.spineMetadata||null,parentResource:r},v={crossOrigin:r.crossOrigin,metadata:c.imageMetadata||null,parentResource:r},y=r.url.substr(0,r.url.lastIndexOf("/")+1);y=y.replace(this.baseUrl,"");var x=c.imageNamePrefix||r.name+"_atlas_page_",M=c.images?a(c.images):c.image?a({default:c.image}):c.imageLoader?c.imageLoader(this,x,y,v):n(this,x,y,v),w=function(e){new t.core.TextureAtlas(e,M,(function(e){e&&(l.attachmentLoader=new t.core.AtlasAttachmentLoader(e),r.spineData=l.readSkeletonData(h),r.spineAtlas=e),i()}))};r.metadata&&r.metadata.atlasRawData?w(r.metadata.atlasRawData):this.add(r.name+"_atlas",p,g,(function(t){t.error?i():w(t.data)}))}}function n(t,e,r,n){return r&&r.lastIndexOf("/")!==r.length-1&&(r+="/"),function(a,i){var o=e+a,s=r+a,l=t.resources[o];if(l){function h(){i(l.texture.baseTexture)}l.texture?h():l.onAfterMiddleware.add(h)}else t.add(o,s,n,(function(t){t.error?i(null):i(t.texture.baseTexture)}))}}function a(t){return function(e,r){var n=t[e]||t.default;n&&n.baseTexture?r(n.baseTexture):r(n)}}e.setExtensionXhrType("skel",e.XHR_RESPONSE_TYPE.BUFFER),t.atlasParser=r,t.imageLoaderAdapter=n,t.syncImageLoaderAdapter=function(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,r){r(l.BaseTexture.fromImage(t,e))}},t.staticImageLoader=a,l.loaders.Loader&&(l.loaders.Loader.addPixiMiddleware(r),l.loader.use(r()))}(u||(u={}));var f=u;let p={};function m(t){const e=t.image,r=t.image.cloneNode();return t.image=r,{tex:n.Texture.from(e),count:0}}function g(t){setTimeout((()=>{const e=p[t];e&&(e.count--,e.count<=0&&(e.tex&&(e.tex.destroy(!0),e.tex=null),delete p[t]))}),100)}let v={};function y(t,e,r,n){let a=null;const i=function(t,e){let r=p[t];return r||(r=m(e),p[t]=r),r.tex}(e,r);new f.core.TextureAtlas(r.atlas,((t,e)=>{e(i.baseTexture)}),(t=>{if(t){const e=new f.core.AtlasAttachmentLoader(t),i=new f.core.SkeletonJson(e);n&&(i.scale=n),a=i.readSkeletonData(r.ske)}}));const o={spineData:a,ref:0,imgName:e};return v[t]=o,o}function x(t){return i(this,void 0,void 0,(function*(){const r=yield e.resource.getResource(t);let n=v[t];if(!n)if(r.complete)n=y(t,r.name,r.data,r.scale);else if(!n)return;return function(t,e){let r=p[t];r||(r=m(e),p[t]=r),r.count++,r.tex}(r.name,r.data),n.ref++,n.spineData}))}e.resource.registerInstance("SPINE",(t=>y(t.name,t.name,t.data,t.scale))),e.resource.registerDestroy("SPINE",(t=>{t.instance&&(g(t.name),t.instance=null)}));let M=class extends r.Renderer{constructor(){super(...arguments),this.armatures={}}init(){this.renderSystem=this.game.getSystem(r.RendererSystem),this.renderSystem.rendererManager.register(this),this.game.canvas.addEventListener("webglcontextrestored",(()=>{const t=this.game.gameObjects;let r=[];for(let n in this.armatures){const a=+n;for(let n=0;n<t.length;++n){let i=t[n];if(i.id===a){let t=i.getComponent(o);t&&(this.remove({type:e.OBSERVER_TYPE.REMOVE,gameObject:i,component:t,componentName:o.componentName}),r.push({type:e.OBSERVER_TYPE.ADD,gameObject:i,component:t,componentName:o.componentName}));break}}}setTimeout((()=>{r.forEach((t=>{this.add(t)}))}),1e3)}),!1)}componentChanged(t){return i(this,void 0,void 0,(function*(){if("Spine"===t.componentName)if(t.type===e.OBSERVER_TYPE.ADD)this.add(t);else if(t.type===e.OBSERVER_TYPE.CHANGE)switch(t.prop.prop[0]){case"resource":this.change(t)}else t.type===e.OBSERVER_TYPE.REMOVE&&this.remove(t)}))}add(t,e){return i(this,void 0,void 0,(function*(){const r=t.component;clearTimeout(r.addHandler);const n=yield x(r.resource);if(!n)return void(r.addHandler=setTimeout((()=>{r.destroied||(void 0===e&&(e=20),--e>0?this.add(t,e):console.log("retry exceed max times",r.resource))}),1e3));this.remove(t);const a=this.renderSystem.containerManager.getContainer(t.gameObject.id);if(!a)return;const i=new f.Spine(n);if(this.armatures[t.gameObject.id]=i,t.gameObject&&t.gameObject.transform){const e=t.gameObject.transform;i.x=e.size.width*e.origin.x,i.y=e.size.height*e.origin.y}if(a.addChildAt(i,0),r.usingResource=r.resource,r.armature=i,r.autoPlay)try{i.state.setAnimation(0,r.animationName,!0)}catch(t){console.log(t)}r.emit("loaded",{resource:r.resource}),i.state.addListener({start:(t,e)=>{r.emit("start",{track:t,name:t.animation.name})},complete:(t,e)=>{r.emit("complete",{track:t,name:t.animation.name})},interrupt:(t,e)=>{r.emit("interrupt",{track:t,name:t.animation.name})},end:(t,e)=>{r.emit("end",{track:t,name:t.animation.name})},event:(t,e)=>{r.emit("event",t,e)}})}))}change(t){this.remove(t),this.add(t)}remove(t){const r=t.component;clearTimeout(r.addHandler);const n=this.armatures[t.gameObject.id],a=this.renderSystem.containerManager.getContainer(t.gameObject.id);a&&n&&a.removeChild(n),r.armature&&(r.armature.destroy({children:!0}),r.usingResource&&function(t){const e=v[t];e&&(e.ref--,e.ref<=0&&(g(e.imgName),delete v[t]))}(r.usingResource)),r.armature=null,delete this.armatures[t.gameObject.id],t.type,e.OBSERVER_TYPE.CHANGE}};M.systemName="SpineSystem",M=a([e.decorators.componentObserver({Spine:["resource"]})],M);var w=M;t.Spine=o,t.SpineSystem=w,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@eva/eva.js"),require("@eva/plugin-renderer"),require("pixi.js")):"function"==typeof define&&define.amd?define(["exports","@eva/eva.js","@eva/plugin-renderer","pixi.js"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).EVA=t.EVA||{},t.EVA.plugin=t.EVA.plugin||{},t.EVA.plugin.renderer=t.EVA.plugin.renderer||{},t.EVA.plugin.renderer.spine38={}),t.EVA,t.EVA.plugin.renderer,t.PIXI);
