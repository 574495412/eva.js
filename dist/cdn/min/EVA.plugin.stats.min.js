var e,t;e=this,t=function(e,t){"use strict";class n extends t.Component{update(){this.stats&&this.stats.begin()}}n.componentName="Stats";const s=function(e){e=Object.assign({width:20,height:12,x:0,y:0},e);const{width:t,height:n,x:i,y:l}=e;let o=0;const a=document.createElement("div");function d(e){return a.appendChild(e.dom),e}function c(e){for(let t=0;t<a.children.length;t++)a.children[t].style.display=t===e?"block":"none";o=e}a.style.cssText=`position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000;width: ${t}vw;height: ${n}vw;left: ${i}vw;top: ${l}vw;`,a.addEventListener("click",(function(e){e.preventDefault(),c(++o%a.children.length)}),!1);let f=(performance||Date).now(),h=f,r=0;const p=d(s.Panel("FPS","#0ff","#002")),u=d(s.Panel("MS","#0f0","#020"));let m;return self.performance&&self.performance.memory&&(m=d(s.Panel("MB","#f08","#201"))),c(0),{REVISION:16,dom:a,addPanel:d,showPanel:c,begin:function(e){f=e||(performance||Date).now()},end:function(){r++;const e=(performance||Date).now();if(u.update(e-f,200),e>=h+1e3&&(p.update(1e3*r/(e-h),100),h=e,r=0,m)){const e=performance.memory;m.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return e},update:function(){f=this.end()},domElement:a,setMode:c}};s.Panel=function(e,t,n){let s=1/0,i=0;const l=Math.round,o=l(window.devicePixelRatio||1),a=80*o,d=48*o,c=3*o,f=2*o,h=3*o,r=15*o,p=74*o,u=30*o,m=document.createElement("canvas");m.width=a,m.height=d,m.style.cssText="width:100%;height:100%";const y=m.getContext("2d");return y.font="bold "+9*o+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,a,d),y.fillStyle=t,y.fillText(e,c,f),y.fillRect(h,r,p,u),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(h,r,p,u),{dom:m,update:function(d,w){s=Math.min(s,d),i=Math.max(i,d),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,a,r),y.fillStyle=t,y.fillText(l(d)+" "+e+" ("+l(s)+"-"+l(i)+")",c,f),y.drawImage(m,h+o,r,p-o,u,h,r,p-o,u),y.fillRect(h+p-o,r,o,u),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(h+p-o,r,o,l((1-d/w)*u))}}};class i extends t.System{constructor(){super(...arguments),this.show=!0}init(e={show:!0}){this.show=e.show,this.style=e.style}start(){this.show&&(this.component=this.game.scene.addComponent(new n),this.stats=s(this.style),this.component.stats=this.stats,this.stats.showPanel(0),document.body.appendChild(this.stats.dom))}lateUpdate(){this.show&&this.stats&&this.stats.end()}}i.systemName="Stats";var l={Components:[n],Systems:[i]};e.Stats=n,e.StatsSystem=i,e.default=l,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@eva/eva.js")):"function"==typeof define&&define.amd?define(["exports","@eva/eva.js"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).EVA=e.EVA||{},e.EVA.plugin=e.EVA.plugin||{},e.EVA.plugin.stats={}),e.EVA);
